<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <UI>
      <Dialog Id="WebConfigDlg" Width="370" Height="270" Title="[ProductName] Setup">
        <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="15" Transparent="yes" NoPrefix="yes" Text="Configuration" />
        <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes" Text="Enter configuration options and click Next to install." />
        <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.InstallDirDlgBannerBitmap)" />
        <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
        <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />

        <Control Id="ControllerText" Type="Text" X="20" Y="83" Width="85" Height="18" NoPrefix="yes" Text="Controller IP Address:" />
        <Control Id="ControllerEdit" Type="Edit" X="105" Y="80" Width="235" Height="18" Property="CONTROLLER_IP" Text="{80}" />
        <Control Id="RabbitText" Type="Text" X="20" Y="123" Width="85" Height="18" NoPrefix="yes" Text="RabbitMQ IP Address:" />
        <Control Id="RabbitEdit" Type="Edit" X="105" Y="120" Width="235" Height="18" Property="RABBIT_IP" Text="{80}" />
        <Control Id="MongoText" Type="Text" X="20" Y="163" Width="80" Height="18" NoPrefix="yes" Text="MongoDB IP Address:" />
        <Control Id="MongoEdit" Type="Edit" X="105" Y="160" Width="235" Height="18" Property="MONGO_IP" Text="{80}" />

        <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
          <Condition Action="disable">
            <![CDATA[RABBIT_IP = "" OR CONTROLLER_IP = "" OR MONGO_IP = ""]]>
          </Condition>
          <Condition Action="enable">
            <![CDATA[NOT (RABBIT_IP = "" OR CONTROLLER_IP = "" OR MONGO_IP = "")]]>
          </Condition>
        </Control>
        <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
        <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
          <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
        </Control>

      </Dialog>

    </UI>
  </Fragment>

  <Fragment>
    <UI Id="WixUI_WebSite">
          <TextStyle Id="WixUI_Font_Normal" FaceName="Tahoma" Size="8" />
          <TextStyle Id="WixUI_Font_Bigger" FaceName="Tahoma" Size="12" />
          <TextStyle Id="WixUI_Font_Title" FaceName="Tahoma" Size="9" Bold="yes" />

          <Property Id="DefaultUIFont" Value="WixUI_Font_Normal" />
          <Property Id="WixUI_Mode" Value="Mondo" />

          <DialogRef Id="ErrorDlg" />
          <DialogRef Id="FatalError" />
          <DialogRef Id="FilesInUse" />
          <DialogRef Id="MsiRMFilesInUse" />
          <DialogRef Id="PrepareDlg" />
          <DialogRef Id="ProgressDlg" />
          <DialogRef Id="ResumeDlg" />
          <DialogRef Id="UserExit" />


          <Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish>

          <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="LicenseAgreementDlg">NOT Installed AND NOT PATCH</Publish>
          <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">Installed AND PATCH</Publish>

          <Publish Dialog="LicenseAgreementDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>
          <Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="WebConfigDlg" Order="2">LicenseAccepted = "1"</Publish>

          <Publish Dialog="WebConfigDlg" Control="Back" Event="NewDialog" Value="LicenseAgreementDlg">1</Publish>
          <Publish Dialog="WebConfigDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>

          <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="WebConfigDlg" Order="2">NOT Installed</Publish>
          <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MaintenanceTypeDlg" Order="4">Installed and NOT PATCH</Publish>
          <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg" Order="2">Installed AND PATCH</Publish>

          <Publish Dialog="MaintenanceWelcomeDlg" Control="Next" Event="NewDialog" Value="MaintenanceTypeDlg">1</Publish>

          <Publish Dialog="MaintenanceTypeDlg" Control="RepairButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
          <Publish Dialog="MaintenanceTypeDlg" Control="RemoveButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
          <Publish Dialog="MaintenanceTypeDlg" Control="Back" Event="NewDialog" Value="MaintenanceWelcomeDlg">1</Publish>

          <Property Id="ARPNOMODIFY" Value="1" />
      </UI>

      <UIRef Id="WixUI_Common" />
  </Fragment>
</Wix>