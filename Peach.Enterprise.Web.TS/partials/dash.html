<div class="page-content">
	<div class="page-header">
		<h1>
			Dashboard
		</h1>
	</div><!-- /.page-header -->

	<div class="row">
		<div class="col-xs-12">
			<!-- PAGE CONTENT BEGINS -->

			<div class="row">
				<div class="col-xs-12">
					<div class="space-6"></div>

					<div class="alert alert-warning" ng-hide="true" ng-class="{'show': vm.pit.configured == false }">
						<button type="button" class="close" data-dismiss="alert">
							<i class="icon-remove"></i>
						</button>
						<strong>Warning!</strong>
						Pit must be configured before starting a Job.
						<a href="#/configurator/intro">Go to Pit Configuration now.</a>
					</div>
					<div class="alert alert-warning" ng-hide="true" ng-class="{'show': vm.pit.pitUrl.length == 0}">
						<button type="button" class="close" data-dismiss="alert">
							<i class="icon-remove"></i>
						</button>
						<strong>Note:</strong>
						You are currently working with a Pit chosen from the command line.
						You will be limited to viewing Faults only.
						To stop the currently running job, switch to the terminal window and close it or stop the process.
					</div>
					<div class="alert alert-success" ng-hide="true" ng-class="{'show': vm.pit.configured == true && vm.pit.pitUrl.length > 0 }">
						<button type="button" class="close" data-dismiss="alert">
							<i class="icon-remove"></i>
						</button>
						Your Pit is configured. Press the START button below to start a fuzzing job.
					</div>

					<div class="col-sm-7 infobox-container">
						<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{(vm.job.startDate | date:'M/d/yy h:mma') || ' '}}</span>
								<div class="infobox-content">Started</div>
							</div>
						</div>

						<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{vm.runtimeString || ' '}}</span>
								<div class="infobox-content">Running Time</div>
							</div>

						</div>

						<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{vm.job.speed || ' '}}</span>
								<div class="infobox-content">Iterations&#47;Hour</div>
							</div>
						</div>

						<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{vm.job.seed || ' '}}</span>
								<div class="infobox-content">Seed</div>
							</div>
						</div>

						<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{vm.job.iterationCount || ' '}}</span>
								<div class="infobox-content">Total Iterations</div>
							</div>
						</div>

						<!--<div class="infobox infobox-blue  ">
							<div class="infobox-data">
								<span class="infobox-data-number">21</span>
								<div class="infobox-content">Major Buckets</div>
							</div>

						</div>-->

						<div class="infobox infobox-red  ">
							<div class="infobox-data">
								<span class="infobox-data-number">{{vm.job.faultCount}}</span>
								<div class="infobox-content">Total Faults</div>
							</div>
						</div>

						<div class="space-6"></div>

					</div>


					<div class="vspace-sm"></div>

					<!-- ****** METRICS CHART ********
					<div class="col-sm-5">
						<div class="widget-box hidden">
							<div class="widget-header widget-header-flat widget-header-small">
								<h5>
									<i class="icon-signal"></i>
									Mutator Metrics
								</h5>
							</div>

							<div class="widget-body">
								<div class="widget-main">
									<div id="piechart-placeholder"></div>
								</div>
							</div>
						</div>
					</div>
					-->
				</div>
			</div><!-- /row -->

			<div class="row">
				<div class="col-sm-7" style="text-align: center">
					<button class="btn btn-lg btn-primary" ng-click="vm.Start()"
									ng-class="{disabled: vm.CanStart == false}">
						START
					</button>

					<button class="btn btn-lg btn-danger" ng-click="vm.Stop()"
									ng-class="{disabled: vm.CanStop == false}">
						STOP
					</button>

					<button class="btn btn-lg btn-default" ng-click="vm.Pause()"
									ng-class="{disabled: vm.CanPause == false}">
						PAUSE
					</button>
				</div>
			</div>

			<div class="hr hr32 hr-dotted"></div>

			<div class="row">
				<div class="col-xs-12">
					<div class="widget-box transparent">
						<div class="widget-header">
							<h4 class="smaller grey">
								Recent Faults
							</h4>
						</div>
						<div class="widget-body">
							<div id="faults-table" class="table table-striped table-bordered table-hover"
									 ng-grid="vm.gridRecentFaults" />
						</div>
					</div>
				</div>

				<!--
								<div class="widget-box transparent" id="recent-box">
									<div class="widget-header">
										<h4 class="lighter smaller">
											<i class="icon-rss orange"></i>
											RECENT
										</h4>

										<div class="widget-toolbar no-border">
											<ul class="nav nav-tabs" id="recent-tab">
												<li class="active">
													<a data-toggle="tab" href="#faults-tab">Faults</a>
												</li>

												<li>
													<a data-toggle="tab" href="#member-tab">Logs</a>
												</li>
											</ul>
										</div>
									</div>

									<div class="widget-body">
										<div class="widget-main padding-4">
											<div class="tab-content padding-8 overflow-visible">
												<div id="faults-tab" class="tab-pane active">
													<h4 class="smaller grey">
														Recent Faults
													</h4>

													<div id="faults-table" class="table table-striped table-bordered table-hover"
															 ng-grid="vm.gridRecentFaults" style="height: 350px" />

												</div>
											</div>

											<div id="member-tab" class="tab-pane">
												<div class="table-responsive hidden">
													<table id="logs-table" class="table table-striped table-bordered table-hover">
														<thead>
															<tr>
																<th>Time</th>
																<th>Log Entry</th>
																<th>Class</th>
															</tr>
														</thead>

														<tbody>
															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>Performing iteration #62</td>
																<td></td>
															</tr>

															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>Action_Starting: Fuzzing: TheDataModel.DataElement_0</td>
																<td>Peach.Core.MutationStrategies.RandomStrategy</td>
															</tr>

															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>Action_Starting: Mutator: UnicodeUtf8ThreeCharMutator</td>
																<td>Peach.Core.MutationStrategies.RandomStrategy</td>
															</tr>

															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>ActionType.Output</td>
																<td>Peach.Core.Dom.Action</td>
															</tr>

															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>open()</td>
																<td>Peach.Core.Publishers.ConsolePublisher</td>
															</tr>

															<tr>
																<td>11/11/2014 11:11:11</td>
																<td>output(876 bytes)</td>
																<td>Peach.Core.Publishers.ConsolePublisher</td>
															</tr>

														</tbody>
													</table>
												</div>



											</div>

										</div>
									</div>
								</div>


							</div>

						-->
			</div>
		</div>
	</div>
</div>

<!--

<script src="/Content/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/Content/js/jquery.ui.touch-punch.min.js"></script>
<script src="/Content/js/jquery.slimscroll.min.js"></script>
<script src="/Content/js/jquery.easy-pie-chart.min.js"></script>
<script src="/Content/js/jquery.sparkline.min.js"></script>
<script src="/Content/js/flot/jquery.flot.min.js"></script>
<script src="/Content/js/flot/jquery.flot.pie.min.js"></script>
<script src="/Content/js/flot/jquery.flot.resize.min.js"></script>
<script src="/Content/js/jquery.dataTables.min.js"></script>
<script src="/Content/js/jquery.dataTables.bootstrap.js"></script>

<script src="/Content/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="/Content/js/jqGrid/jquery.jqGrid.min.js"></script>
<script src="/Content/js/jqGrid/i18n/grid.locale-en.js"></script>



<script type="text/javascript" src="/Content/js/d3.min.js" charset="utf-8"></script>
		<script type="text/javascript">
			jQuery(function($) {

				//$('#faults-table').dataTable();

				$('.easy-pie-chart.percentage').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
					var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
					var size = parseInt($(this).data('size')) || 50;
					$(this).easyPieChart({
						barColor: barColor,
						trackColor: trackColor,
						scaleColor: false,
						lineCap: 'butt',
						lineWidth: parseInt(size/10),
						animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,
						size: size
					});
				})

				$('.sparkline').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
					$(this).sparkline('html', {tagValuesAttribute:'data-values', type: 'bar', barColor: barColor , chartRangeMin:$(this).data('min') || 0} );
				});


				var placeholder = $('#piechart-placeholder').css({'width':'90%' , 'min-height':'150px'});
				var data = [
				{ label: "Numerical Edge",  data: 38.7, color: "#68BC31"},
				{ label: "BOM",  data: 24.5, color: "#2091CF"},
				{ label: "String",  data: 8.2, color: "#AF4E96"},
				{ label: "DWORD Slide",  data: 18.6, color: "#DA5430"},
				{ label: "other",  data: 10, color: "#FEE074"}
				]
				function drawPieChart(placeholder, data, position) {
					$.plot(placeholder, data, {
					series: {
						pie: {
							show: true,
							tilt:0.8,
							highlight: {
								opacity: 0.25
							},
							stroke: {
								color: '#fff',
								width: 2
							},
							startAngle: 2
						}
					},
					legend: {
						show: true,
						position: position || "ne",
						labelBoxBorderColor: null,
						margin:[-30,15]
					}
					,
					grid: {
						hoverable: true,
						clickable: true
					}
				 })
			 }
			 drawPieChart(placeholder, data);

			 // we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
			 // so that's not needed actually.
			 placeholder.data('chart', data);
			 placeholder.data('draw', drawPieChart);


				var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');
				var previousPoint = null;

				placeholder.on('plothover', function (event, pos, item) {
				if(item) {
					if (previousPoint != item.seriesIndex) {
						previousPoint = item.seriesIndex;
						var tip = item.series['label'] + " : " + item.series['percent']+'%';
						$tooltip.show().children(0).text(tip);
					}
					$tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$tooltip.hide();
					previousPoint = null;
				}

			 });


				var d1 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d1.push([i, Math.sin(i)]);
				}

				var d2 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d2.push([i, Math.cos(i)]);
				}

				var d3 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.2) {
					d3.push([i, Math.tan(i)]);
				}

				$('#recent-box [data-rel="tooltip"]').tooltip({placement: tooltip_placement});
				function tooltip_placement(context, source) {
					var $source = $(source);
					var $parent = $source.closest('.tab-content')
					var off1 = $parent.offset();
					var w1 = $parent.width();

					var off2 = $source.offset();
					var w2 = $source.width();

					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}


				$('.dialogs,.comments').slimScroll({
					height: '300px'
					});


				//Android's default browser somehow is confused when tapping on label which will lead to dragging the task
				//so disable dragging when clicking on label
				var agent = navigator.userAgent.toLowerCase();
				if("ontouchstart" in document && /applewebkit/.test(agent) && /android/.test(agent))
					$('#tasks').on('touchstart', function(e){
					var li = $(e.target).closest('#tasks li');
					if(li.length == 0)return;
					var label = li.find('label.inline').get(0);
					if(label == e.target || $.contains(label, e.target)) e.stopImmediatePropagation() ;
				});

				/////////////////////////////////////////////////////////////////


			})
		</script>
-->
