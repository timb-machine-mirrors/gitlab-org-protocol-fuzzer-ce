#!/usr/bin/env python

"""
subdirs = [
]

bld.recurse(subdirs)

"""

mapping = {
	'System.Data.SQLite.x86' : 'win_x86',
	'System.Data.SQLite.x64' : 'win_x64',
}

excludes = {
	# Microsoft scripting assemblies are included in IronPython
	'IronRuby' : '**/Microsoft.*.dll'
}

bld.read_nuget('packages.config', excl=excludes, mapping=mapping)

bld.read_csshlib('EasyHook.dll', paths=['EasyHook-2.6'])
bld.read_csshlib('LibUsbDotNet.dll', paths=['LibUsbDotNet'])

bld.read_all_csshlibs('Telerik Reporting Q3 2013/Bin')
bld.read_all_csshlibs('Telerik ASP.NET AJAX/Bin40')
#bld.read_all_csshlibs('RadControls for WPF Q3 2012/Binaries/WPF40')
#bld.read_all_csshlibs('Actipro-WPF-Controls-12.2.0570/Assemblies')

# Be.HexBox is not nugetable yet
bld.read_csshlib('Be.Windows.Forms.HexBox.dll', paths=['Be.HexEditor.150/bin'])

subdirs = [
	'pin',
	'Newtonsoft.Json',
	'Renci.SshNet',
	'Nancy.Serialization.JsonNet',
	'Portable.Licensing',
	'TotalPhase-5.13',
	'Managed.AndroidDebugBridge',
	'VMware-VIX-1.13.0-1295980',
	'SuperSocket',
	'SuperWebSocket',
	'SocketHttpListener/SocketHttpListener',
]

bld.recurse(subdirs)

if bld.env.CS_NAME == 'csc':
	# Allow for compilation of all c# on windows
	bld.read_csshlib('Mono.Posix.dll', paths=['Mono.2.10.9'])

if bld.env.MCS:
	# Needed to run remote agent tests
	bld(
		name = 'nunit.core.dll',
		install_path = '${BINDIR}',
		install_755 = { bld.path.find_node('NUnit.Runners.2.6.3/tools/lib') : 'nunit.core.dll' },
	)

if bld.env.BASENAME == 'osx':
	bld(
		name='CrashWrangler',
		install_path = '${BINDIR}',
		install_644 = bld.path.ant_glob('CrashWrangler/**/*'),
	)
