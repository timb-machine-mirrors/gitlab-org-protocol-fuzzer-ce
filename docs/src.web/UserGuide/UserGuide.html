<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Peach Fuzzer, LLC">
<title>Peach API Security: User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Peach API Security: User Guide</h1>
<div class="details">
<span id="author" class="author">Peach Fuzzer, LLC</span><br>
<span id="revnumber">version 4.3.0.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_what_is_peach_api_security">1.1. What is Peach API Security?</a></li>
<li><a href="#_additional_resources">1.2. Additional Resources</a></li>
<li><a href="#_bug_reporting_guidelines">1.3. Bug Reporting Guidelines</a></li>
</ul>
</li>
<li><a href="#JumpStart">2. Getting Started with the Peach API Security</a>
<ul class="sectlevel2">
<li><a href="#_development_engineering_team">2.1. Development/Engineering Team</a></li>
<li><a href="#_manual_usage_security_team_red_team">2.2. Manual Usage/Security Team/Red Team</a></li>
</ul>
</li>
<li><a href="#Installation">3. Installation</a>
<ul class="sectlevel2">
<li><a href="#Install_ResourceRequirements">3.1. Resource Recommendations</a></li>
<li><a href="#_create_instance">3.2. Create Instance</a></li>
<li><a href="#_instance_configuration">3.3. Instance Configuration</a></li>
<li><a href="#_admin_panel">3.4. Admin Panel</a></li>
<li><a href="#_licensing">3.5. Licensing</a></li>
</ul>
</li>
<li><a href="#Brand_new_items">4. What&#8217;s new in Peach API Security v4.3 (2017 Q1)</a></li>
<li><a href="#Configuration">5. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_profiles">5.1. Profiles</a></li>
<li><a href="#_ignored_failures">5.2. Ignored Failures</a></li>
<li><a href="#_ssl_configuration">5.3. SSL Configuration</a></li>
<li><a href="#_route_configuration">5.4. Route Configuration</a></li>
</ul>
</li>
<li><a href="#CI">6. CI Integration</a>
<ul class="sectlevel2">
<li><a href="#CI_GenericRunner">6.1. Generic CI Runner</a></li>
</ul>
</li>
<li><a href="#TrafficGen">7. Automated Test Integration</a>
<ul class="sectlevel2">
<li><a href="#tg_JUnit4">7.1. JUnit 4</a></li>
<li><a href="#tg_pyunit">7.2. Python Unit test (PyUnit)</a></li>
<li><a href="#tg_pytest">7.3. pytest</a></li>
</ul>
</li>
<li><a href="#ChecksAndAsserts">8. Checks and Asserts</a>
<ul class="sectlevel2">
<li><a href="#_checks">8.1. Checks</a></li>
<li><a href="#_asserts">8.2. Asserts</a></li>
</ul>
</li>
<li><a href="#Auth">9. Authenticated Services</a>
<ul class="sectlevel2">
<li><a href="#_tls_user_certificates">9.1. TLS User Certificates</a></li>
<li><a href="#_hashed_computed_keys">9.2. Hashed/computed keys</a></li>
<li><a href="#Scripts">9.3. Scripts</a></li>
</ul>
</li>
<li><a href="#IssueTracker">10. Issue Tracker Integration</a>
<ul class="sectlevel2">
<li><a href="#_jira">10.1. JIRA</a></li>
<li><a href="#_bugzilla">10.2. Bugzilla</a></li>
</ul>
</li>
<li><a href="#LogSink">11. Log Sink</a></li>
<li><a href="#_sdk">12. SDK</a>
<ul class="sectlevel2">
<li><a href="#_downloading_sdk">12.1. Downloading SDK</a></li>
<li><a href="#_sdk_contents">12.2. SDK Contents</a></li>
<li><a href="#_targets">12.3. Targets</a></li>
</ul>
</li>
<li><a href="#_licensing_2">13. Licensing</a>
<ul class="sectlevel2">
<li><a href="#_license_types">13.1. License Types</a></li>
<li><a href="#_licensing_concepts">13.2. Licensing Concepts</a></li>
<li><a href="#_activation">13.3. Activation</a></li>
<li><a href="#_reclaim_license_returning_device">13.4. Reclaim license/Returning Device</a></li>
<li><a href="#_licensing_expiring_warning">13.5. Licensing Expiring Warning</a></li>
<li><a href="#_how_to_purchase_additional_licenses">13.6. How to purchase additional licenses</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="Preface">1. Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is the official documentation of Peach API Security v4.3.
This documentation set is written by the Peach API Security team, and
represents a concerted effort to fully document all of the Peach API Security features.</p>
</div>
<div class="paragraph">
<p>This document, Peach API Security User Guide, focuses on activities encountered in day-to-day usage of Peach API Security.
The organization of this document is predominantly task-driven.</p>
</div>
<div class="paragraph">
<p>The primary audience for this guide includes all associated roles including operations and end users.</p>
</div>
<div class="sect2">
<h3 id="_what_is_peach_api_security">1.1. What is Peach API Security?</h3>
<div class="paragraph">
<p>Peach API Security performs security testing of Web Services/APIs.
Testing includes OWASP Top-10 and PCI 6.5 security checks and also includes fuzzing.
Peach API Security is designed to integrate into modern development models such as Agile and continuous integration (CI) cycles.
Integrations with CI systems enable the product to be run automatically during daily builds.
Peach API Security is intended to be integrated into engineering groups with minimal alterations to existing developer workflows.</p>
</div>
<div class="sect3">
<h4 id="_use_cases">1.1.1. Use cases</h4>
<div class="paragraph">
<p>Peach API Security has two primary use cases, integration into engineering groups and use by security teams
in an organization.</p>
</div>
<div class="sect4">
<h5 id="_integration_into_engineering_team">Integration into Engineering Team</h5>
<div class="paragraph">
<p>For teams building web services and web APIs, integration into the CI
system or automated test system provides a lot of advantages over
traditional web testing processes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Immediate feedback.
When security testing occurs with every build, security issues are found and fixed much faster.</p>
</li>
<li>
<p>Lower cost of fixing security issues.
The cost to fix a security issue increases as time between when it was authored and discovered grows.
By providing immediate feedback, the time between write and fix is shortened.</p>
</li>
<li>
<p>Lower Cost of Ownership.
Re-purposing existing automated tests removes the need to maintain configurations for each API.
Re-using existing tests also quickly provides high test coverage with little effort.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_resources">1.2. Additional Resources</h3>
<div class="paragraph">
<p>More information about Peach API Security is available on the Web:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://peachfuzzer.com">Peach Fuzzer website</a></p>
</li>
<li>
<p><a href="https://dl.peachfuzzer.com">Peach Customer Portal/Download Site</a></p>
</li>
<li>
<p><a href="https://forums.peachfuzzer.com">Peach User Forums</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_reporting_guidelines">1.3. Bug Reporting Guidelines</h3>
<div class="paragraph">
<p>Support for Peach API Security is available via our support alias and soon our new support portal.</p>
</div>
<div class="sect3">
<h4 id="_support_tickets">1.3.1. Support Tickets</h4>
<div class="paragraph">
<p>You can open a support ticket by sending an email to <em>support@peachfuzzer.com</em>.
You will receive an initial response within 24 business hours of opening the ticket.
Peach support is available Monday through Friday during business hours Pacific time zone (PST).
Peach support is not currently available on weekends or holidays.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="JumpStart">2. Getting Started with the Peach API Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section will provide an introduction to using Peach API Security.
Other sections of this Peach API Security User Guide will be referenced to provide additional or supporting
information.</p>
</div>
<div class="paragraph">
<p>The following two sections describe different usage models for Peach API Security.</p>
</div>
<div class="sect2">
<h3 id="_development_engineering_team">2.1. Development/Engineering Team</h3>
<div class="paragraph">
<p>For teams building web services and web APIs, integration into the CI
system or automated test system provides a lot of advantages over
traditional web testing processes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Immediate feedback.
When security testing occurs with every build, security issues are found and fixed much faster.</p>
</li>
<li>
<p>Lower cost of fixing security issues.
The cost to fix a security issue increases as time between when it was authored and discovered grows.
By providing immediate feedback, the time between write and fix is shortened.</p>
</li>
<li>
<p>Lower Cost of Ownership.
Re-purposing existing automated tests removes the need to maintain configurations for each API.
Re-using existing tests also quickly provides high test coverage with little effort.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A typical deployment includes the following components:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">CI integration</dt>
<dd>
<p>The CI system&#8217;s pipeline is configured to include Peach API Security testing with specific types of builds.
For example, nightly builds might be configured to run Peach API Security testing for 2 hours each night.
If security testing fails during those 2 hours, the build would be marked as such, similar to failing
automated tests.</p>
<div class="paragraph">
<p>For more information see the <a href="#CI">CI Integration</a> section of the User Guide.</p>
</div>
</dd>
<dt class="hdlist1">Traffic Generator</dt>
<dd>
<div class="paragraph">
<p>A traffic generator is needed to produce requests that are then tested and/or fuzzed.
Traffic generators will replay the same traffic over and over allowing Peach API Security to modify them as
needed to perform testing.</p>
</div>
<div class="paragraph">
<p>The <a href="#TrafficGen">Traffic Generator</a> section provides more information about what is needed.</p>
</div>
<div class="paragraph">
<p>There are two common methods:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Automated Test Integration</dt>
<dd>
<div class="paragraph">
<p>Use existing test automation with one of Peach&#8217;s framework integrations such as JUnit or pytest.
The use of existing test automation provides a fast way to get Peach API Security running.</p>
</div>
</dd>
<dt class="hdlist1">Custom Traffic Generator</dt>
<dd>
<div class="paragraph">
<p>A custom traffic generator can also be used.
These are custom written scripts in any language (python, java, nodejs, etc.).
A simple custom traffic generator might be a loop around a set of API calls.</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Issue Tracker Integration</dt>
<dd>
<p>Peach can automatically log found faults into popular issue trackers such as JIRA or Bugzilla.
The scripts and documentation are provided in <em>SDK/tools/peach2bugzilla</em> and <em>SDK/tools/peach2jira</em>.</p>
<div class="paragraph">
<p>For more information see the <a href="#IssueTracker">Issue Tracker Integration</a> section of the User Guide.</p>
</div>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_manual_usage_security_team_red_team">2.2. Manual Usage/Security Team/Red Team</h3>
<div class="paragraph">
<p>Use by individual testers such as redteam members or penetration testers can be achieved in several ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A custom traffic generator script can be written in a language known by the tester such as Python.
These scripts are easy and quick to author- existing sample code can be used in many cases.</p>
</li>
<li>
<p>Selenium Firefox plugin can be used to record a web session.
Selenium then exports to formats like JUnit that have Peach integrations.</p>
</li>
<li>
<p>Automated tests from the engineering group can be used with one of the Peach API Security test runner
plugins.</p>
</li>
<li>
<p>Attack proxies can forward input into Peach for testing.
For example Burp Repeater can be used to forward requests through Peach multiple times.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Installation">3. Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach API Security is distributed as a virtual machine image.
The installation process consists of creating a virtual machine instance and
performing some initial configuration steps.
These steps can be performed by operations or IT staff and does not require training.</p>
</div>
<div class="sect2">
<h3 id="Install_ResourceRequirements">3.1. Resource Recommendations</h3>
<div class="paragraph">
<p>The following are hardware recommendations for Peach API Security.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Virtualization</th>
<th class="tableblock halign-left valign-top">Architecture</th>
<th class="tableblock halign-left valign-top">Cores</th>
<th class="tableblock halign-left valign-top">Ram</th>
<th class="tableblock halign-left valign-top">Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMWare</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40GB SSD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual Box</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40GB SSD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following ports are used and should be allowed as ingress for Peach API Security.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">TLS</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTful API (faster than 443 when testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UI + Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp/512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Syslog (remote logs, only open during testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy port (only open during testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin console</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Port 80 is not a hard requirement, but does increase the speed of testing.
If company policies do not allow for HTTP usage in your test networks, open port 443 and configure
the PEACH_API setting to <em>https</em> instead of <em>http</em>.</p>
</div>
<div class="sect3">
<h4 id="_amazon_aws_ec2">3.1.1. Amazon AWS EC2</h4>
<div class="paragraph">
<p>These recommendations are the same for both AWS Marketplace purchases
as well as importing a machine image.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cloud Provider</th>
<th class="tableblock halign-left valign-top">Instance Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS EC2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">t2.medium</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_instance">3.2. Create Instance</h3>
<div class="paragraph">
<p>This section covers how to create an instance in various virtual machine software or cloud providers.
It assumes prior knowledge of the technologies and basic usage.</p>
</div>
<div class="sect3">
<h4 id="_vmware_vsphere">3.2.1. VMWare vSphere</h4>
<div class="paragraph">
<p>Use the following steps to create a new instance through vSphere:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to a vSphere server with the vSphere client.</p>
</li>
<li>
<p>Select File &#8594; Deploy OVF Template.</p>
</li>
<li>
<p>Follow the wizard and optionally change the resource allocation for the virtual appliance.
The defaults provided are safe to use for most installations.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_vmware_vcenter">3.2.2. VMWare vCenter</h4>
<div class="paragraph">
<p>Use the following steps to create a new instance through vCenter:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to a vCenter server with the vSphere client.</p>
</li>
<li>
<p>Select an inventory object that is a valid parent object of a virtual machine,
such as a datacenter, folder, cluster, resource pool, or host.</p>
</li>
<li>
<p>Select Actions &#8594; All vCenter Actions &#8594; Deploy OVF Template.</p>
</li>
<li>
<p>Specify the source location and click Next.</p>
</li>
<li>
<p>Optionally change the resource allocation for the virtual appliance.
The defaults provided are safe to use for most installations.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_vmware_workstation">3.2.3. VMWare Workstation</h4>
<div class="paragraph">
<p>Use the following steps to create a new instance using VMWare Workstation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open VMWare Workstation</p>
</li>
<li>
<p>Select File &#8594; Open</p>
</li>
<li>
<p>Select the downloaded OVA file</p>
</li>
<li>
<p>Optionally change the resource allocation for the virtual appliance.
The defaults provided are safe to use for most installations.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_virtual_box">3.2.4. Virtual Box</h4>
<div class="paragraph">
<p>Creating a new instance in Virtual Box is very simple.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Import the virtual appliance</dt>
<dd>
<p>This is done via the File menu and the <em>Import Virtual Appliance</em> option.
Select the <code>.ova</code> file that was downloaded from the Peach API Security
customer portal at <a href="https://dl.peachfuzzer.com" class="bare">https://dl.peachfuzzer.com</a>.
The default values can be used during import.</p>
</dd>
<dt class="hdlist1">Start Instance</dt>
<dd>
<p>The instance is now ready to be started and configured.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_amazon_aws">3.2.5. Amazon AWS</h4>
<div class="paragraph">
<p>Two methods currently exist for starting Peach API Security instances.
The first method requires importing the machine image (OVA) file, while
the second requires purchasing Peach API Security through the Amazon
Marketplace.</p>
</div>
<div class="sect4">
<h5 id="_import_image">Import Image</h5>
<div class="paragraph">
<p>Amazon provides good documentation about importing VM images, including OVAs.
See the following section of the VM Import/Export User Guide:
<a href="http://docs.aws.amazon.com/vm-import/latest/userguide/import-vm-image.html">Step 3: Import Your VM as an Image</a></p>
</div>
<div class="paragraph">
<p>Once imported, an instance of the AMI can be launched.
See the <a href="#Install_ResourceRequirements">Resource Requirements</a> section for recommendations on instance type.</p>
</div>
</div>
<div class="sect4">
<h5 id="_marketplace">Marketplace</h5>
<div class="paragraph">
<p>New instances can also be purchased/launched via the Amazon Marketplace.
See the <a href="#Install_ResourceRequirements">Resource Requirements</a> section for recommendations on instance type.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instance_configuration">3.3. Instance Configuration</h3>
<div class="paragraph">
<p>This section contains the steps required to configure a new instance of Peach API Security.
Configuring authentication is an optional, but recommended step.</p>
</div>
<div class="sect3">
<h4 id="_network_ports">3.3.1. Network Ports</h4>
<div class="paragraph">
<p>The following ports are used and should be allowed as ingress for Peach API Security.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">TLS</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTful API (faster than 443 when testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UI + Application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp/512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Syslog (remote logs, only open during testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy port (only open during testing)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp/10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin console</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_network_configuration">3.3.2. Network Configuration</h4>
<div class="paragraph">
<p>Initial network configuration is performed via a console application.
Additional configuration can be performed through the admin portal located on port 10000.
The following URL can be used: <code>https://[IP]:10000/</code> to access the admin portal.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/ConfigurationConsole.png" alt="ConfigurationConsole">
</div>
<div class="title">Figure 1. Peach API Security Console</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/ConfigurationConsole-Advanced.png" alt="ConfigurationConsole Advanced">
</div>
<div class="title">Figure 2. Console Advanced Configuration Screen</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/ConfigurationConsole-Networking.png" alt="ConfigurationConsole Networking">
</div>
<div class="title">Figure 3. Console Network Configuration Screen</div>
</div>
</div>
<div class="sect3">
<h4 id="Install_ChangeDefaultPassword">3.3.3. Change Default credentials</h4>
<div class="paragraph">
<p>Once networking has been configured the very first configuration step is to
set a new password for the default administrative user <em>peach</em> via the admin portal.</p>
</div>
<div class="sect4">
<h5 id="_step_1_login_to_peach_api_security_admin_portal">Step 1: Login to Peach API Security Admin Portal</h5>
<div class="paragraph">
<p>The admin portal for Peach API Security can be accessed via the folling URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://[IP]:10000/</pre>
</div>
</div>
<div class="paragraph">
<p>Login using the default credentials:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>user: peach
password: peach</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_navigate_to_webmin_users">Step 2: Navigate to Webmin Users</h5>
<div class="paragraph">
<p>Using the left hand naviagtion, select <em>Webmin</em>, then <em>Webmin Users</em> as shown in the following figure.
Next, click on the user <em>root</em> as shown in the following figure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_ChangeAdminPass-1.png" alt="Webmin Config ChangeAdminPass 1">
</div>
<div class="title">Figure 4. Webmin Users Page</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_set_new_password">Step 3: Set New Password</h5>
<div class="paragraph">
<p>From the <em>Edit Webmin User</em> page, set the <em>Password</em> drop-down to <em>Set to ..</em> and
type in the new password in the following text entry box as shown in the following image.
Once set, click the <em>Save</em> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_ChangeAdminPass-2.png" alt="Webmin Config ChangeAdminPass 2">
</div>
<div class="title">Figure 5. Set New Admin Password</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_certificate_installation">3.3.4. SSL Certificate Installation</h4>
<div class="paragraph">
<p>The instance ships with a temporary self-signed SSL certificate.
This certificate should be replaced with a custom self-signed or preferably a legitimate
SSL certificate from your company&#8217;s certificate authority.</p>
</div>
<div class="paragraph">
<p>The admin panel provides several easy to use methods for configuring SSL.
The SSL configuration for the admin panel will be used for Peach API Security as well.
The supported configurations are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Certificate from Certificate Authority (CA)</dt>
<dd>
<p>In this method all files can be set/uploaded or the admin panel can
generate a certificate signing request (CSR) that can be sent to a
CA to produce an SSL certificate.
This is the recommended method.</p>
</dd>
<dt class="hdlist1">Let&#8217;s Encrypt</dt>
<dd>
<p>While the option for using Let&#8217;s Encrypt exists in the admin panel,
it is not supported by this virtual appliance.</p>
</dd>
<dt class="hdlist1">Self-Signed Certificate</dt>
<dd>
<p>Generate a new self-signed certificate.
This certificate type is better than using the shipped default, but otherwise
provides the least amount of security.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_certificate_from_ca">Certificate from CA</h5>
<div class="paragraph">
<p>Use the following steps to generate a certificate signing request,
submit it to a CA and finally install the certificate using the Peach API Security admin portal.</p>
</div>
<div class="sect5">
<h6 id="_step_1_login_to_peach_api_security_admin_portal_2">Step 1: Login to Peach API Security Admin Portal</h6>
<div class="paragraph">
<p>The admin portal for Peach API Security can be accessed via the folling URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://[IP]:10000/</pre>
</div>
</div>
<div class="paragraph">
<p>Login using the default credentials (user: ubuntu, password: ubuntu) or if they have
already been changed, the new credentials.</p>
</div>
</div>
<div class="sect5">
<h6 id="_step_2_navigate_to_ssl_encryption">Step 2: Navigate to SSL Encryption</h6>
<div class="paragraph">
<p>Using the left hand menu, select "Webmin" and then "Webmin Configuration".
This will bring you to a page with numerous configuration buttons.
As shown in the following figure, select "SSL Encryption".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-1.png" alt="Webmin Config SSL 1">
</div>
<div class="title">Figure 6. Admin Panel SSL Configuration</div>
</div>
</div>
<div class="sect5">
<h6 id="_step_3_create_certificate_signing_request_csr">Step 3: Create Certificate Signing Request (CSR)</h6>
<div class="paragraph">
<p>Next, a certificate signing request (CSR) must be generated.
To start this process select the "Certificate Signing Request" tab and
fill in the required information as shown in the following figure.
To generate the CSR click the <em>Create Now</em> button as shown in the
following figure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-CSR-1.png" alt="Webmin Config SSL CSR 1">
</div>
<div class="title">Figure 7. Create Certificate Sining Request</div>
</div>
</div>
<div class="sect5">
<h6 id="_step_4_send_certificate_signing_request_to_ca">Step 4: Send Certificate Signing Request to CA</h6>
<div class="paragraph">
<p>The generated CSR and new private key should be displayed as shown in the
following figure.
The second field under the label "Successfully generated the following SSL certificate request:"
must now be sent to the certificate authority (CA) to generate a signed SSL certificate.
The field to copy is indicated by the red arrow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-CSR-2.png" alt="Webmin Config SSL CSR 2">
</div>
<div class="title">Figure 8. Generated Certificate Signing Request</div>
</div>
</div>
<div class="sect5">
<h6 id="_step_5_upload_ssl_certificate">Step 5: Upload SSL Certificate</h6>
<div class="paragraph">
<p>This step requires the PEM encoded SSL Certificate and optional certificate chain, also PEM encoded.
To start, navigate to the "Upload Certificate" tab as shown in the following diagram.
Paste in the full contents of the SSL Certificate file (or use the upload function).
Also paste in the full contents of the chained certificate file (or use the upload funciton).</p>
</div>
<div class="paragraph">
<p>Once the contents are submitted click the "Save" button as shown in the following figure.
This will complete the SSL configuration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-UploadCert.png" alt="Webmin Config SSL UploadCert">
</div>
<div class="title">Figure 9. Upload SSL Certificate</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_self_signed_certificate">Self-Signed Certificate</h5>
<div class="paragraph">
<p>Use the following steps to generate a self-signed SSL certificate using the
Peach API Security admin portal.</p>
</div>
<div class="sect5">
<h6 id="_step_1_login_to_peach_api_security_admin_portal_3">Step 1: Login to Peach API Security Admin Portal</h6>
<div class="paragraph">
<p>The admin portal for Peach API Security can be accessed via the folling URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://[IP]:10000/</pre>
</div>
</div>
<div class="paragraph">
<p>Login using the default credentials (user: ubuntu, password: ubuntu) or if they have
already been changed, the new credentials.</p>
</div>
</div>
<div class="sect5">
<h6 id="_step_2_navigate_to_ssl_encryption_2">Step 2: Navigate to SSL Encryption</h6>
<div class="paragraph">
<p>Using the left hand menu, select "Webmin" and then "Webmin Configuration".
This will bring you to a page with numerous configuration buttons.
As shown in the following figure, select "SSL Encryption".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-1.png" alt="Webmin Config SSL 1">
</div>
<div class="title">Figure 10. Admin Panel SSL Configuration</div>
</div>
</div>
<div class="sect5">
<h6 id="_step_3_create_self_signed_certificate">Step 3: Create Self-Signed Certificate</h6>
<div class="paragraph">
<p>Select the "Self-Signed Certificate" tab and fill out the <em>Create SSL key</em> form.
Once the form has been completed click the "Create Now" button as shown in the following
figure.</p>
</div>
<div class="paragraph">
<p>Once the generated the admin portal site will need to be refreshed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Install/Webmin_Config_SSL-SelfSigned.png" alt="Webmin Config SSL SelfSigned">
</div>
<div class="title">Figure 11. Self-Signed Certificate</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authentication">3.3.5. Authentication</h4>
<div class="paragraph">
<p>Authentication is currently supported via an Apache reverse proxy.
Apache supports a number of authentication mechanisms from local through LDAP.
The authentication panel gives access to the Apache configuration.</p>
</div>
<div class="sect4">
<h5 id="_active_directory_ldap">Active Directory / LDAP</h5>
<div class="paragraph">
<p>Instructions for configuring active directory or LDAP authentication will
be included in the non-beta Peach API Security User Guide.
Contact support for assistance until then.</p>
</div>
</div>
<div class="sect4">
<h5 id="_local">Local</h5>
<div class="paragraph">
<p>Intructions for configuring local authentication will
be included in the non-beta Peach API Security User Guide.
Contact support for assistance until then.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_admin_panel">3.4. Admin Panel</h3>
<div class="paragraph">
<p>The Peach API Security virtual appliance includes an admin panel to provide administrative abilities.
This version of Peach API Security uses the open source <a href="http://webmin.com/">Webmin</a> admin panel.</p>
</div>
<div class="paragraph">
<p>The admin portal can be accessed via the following URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://[IP]:10000/</pre>
</div>
</div>
<div class="paragraph">
<p>Example, if your virtual appliance IP is <code>192.168.1.10</code> then the url is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://192.168.1.10:10000/</pre>
</div>
</div>
<div class="paragraph">
<p>The default administrator credentials are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>User: peach
Password: peach</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The administrator credentials should be changed immediately.
Changing the credentials is a critical part of the installation process provided in this document.
<a href="#Install_ChangeDefaultPassword">Change Default Credentials</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_licensing">3.5. Licensing</h3>
<div class="paragraph">
<p>This section covers basic product activation.</p>
</div>
<div class="sect3">
<h4 id="_online_activation">3.5.1. Online Activation</h4>
<div class="paragraph">
<p>Online activation is the quickest way to activate your licensed Peach API Security instance.
Online activation requires internet connectivity.
If your instance does not have internet connectivity please follow the offline
activation process.</p>
</div>
<div class="sect4">
<h5 id="_step_1_activation_id_from_portal">Step 1: Activation ID from Portal</h5>
<div class="paragraph">
<p>Access the Peach API Security portal/download site and copy an unused activation id.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>The download page will display a list of activation ids</p>
</li>
<li>
<p>Copy an unused activation id</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_ActivationId.png" alt="Portal ActivationId">
</div>
<div class="title">Figure 12. Portal Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_peach_api_security_licensing_page">Step 2: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 13. Not Activated Alert</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_enter_activation_id">Step 3: Enter Activation ID</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll to Licensing section of settings page</p>
</li>
<li>
<p>Paste copied activation ID into activation ID box</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_ActivationId.png" alt="Activate Licensing ActivationId">
</div>
<div class="title">Figure 14. Enter Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_4_online_activation">Step 4: Online Activation</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the "Online Activation" button</p>
</li>
<li>
<p>Wait for action to complete</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_OnlineActivation.png" alt="Activate Licesning OnlineActivation">
</div>
<div class="title">Figure 15. Click Online Activation</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_activated">Step 5: Activated</h5>
<div class="paragraph">
<p>The alert will turn green if the activation of successful, as shown below.
An error will be displayed if the activation failed.</p>
</div>
<div class="paragraph">
<p>Common reasons for activation failure include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No internet connectivity</p>
</li>
<li>
<p>Activation ID already used</p>
</li>
<li>
<p>Activation ID entered incorrectly</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_Activated.png" alt="Activate Licensing Activated">
</div>
<div class="title">Figure 16. Activated</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_offline_activation">3.5.2. Offline Activation</h4>
<div class="paragraph">
<p>Offline activation does not require that your Peach API Security instance have internet access.
The person performing activation will need access to both the Peach API Security instance and also access to the internet.
This access is not required to be at the same time.</p>
</div>
<div class="sect4">
<h5 id="_step_1_activation_id_from_portal_2">Step 1: Activation ID from Portal</h5>
<div class="paragraph">
<p>Access the Peach API Security portal/download site and copy an unused activation id.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>The download page will display a list of activation ids</p>
</li>
<li>
<p>Copy an unused activation id</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_ActivationId.png" alt="Portal ActivationId">
</div>
<div class="title">Figure 17. Portal Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_peach_api_security_licensing_page_2">Step 2: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 18. Not Activated Alert</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_enter_activation_id_2">Step 3: Enter Activation ID</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll to Licensing section of settings page</p>
</li>
<li>
<p>Paste the copied activation ID into activation ID box</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_ActivationId.png" alt="Activate Licensing ActivationId">
</div>
<div class="title">Figure 19. Enter Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_4_download_offline_request">Step 4: Download Offline Request</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Offline Activation Request "Download" button</p>
</li>
<li>
<p>Wait for file to download</p>
</li>
<li>
<p>Move file to machine with internet connectivity for next step</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_Offline_DownloadRequest.png" alt="Activate Licesning Offline DownloadRequest">
</div>
<div class="title">Figure 20. Click Download</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_upload_to_portal">Step 5: Upload to Portal</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>Click on the Licensing link on top nav</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_LicensingPage.png" alt="Portal LicensingPage">
</div>
<div class="title">Figure 21. Licensing Page</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on Offline Activation Upload button</p>
</li>
<li>
<p>Select the file downloaded from Peach API Security in Step 4.</p>
</li>
<li>
<p>Once processed a response file will automatically download.</p>
</li>
<li>
<p>Copy response download to machine with access to Peach API Security instance.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_LicensingPage_OfflineUpload.png" alt="Portal LicensingPage OfflineUpload">
</div>
<div class="title">Figure 22. Offline Activation Upload</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_6_peach_api_security_licensing_page">Step 6: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 23. Not Activated Alert</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on Offline Activation Upload button</p>
</li>
<li>
<p>Upload response file downloaded in Step 5</p>
</li>
<li>
<p>Wait for file to be processed.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_Offline_UploadResponse.png" alt="Activate Licesning Offline UploadResponse">
</div>
<div class="title">Figure 24. Offline Activation Upload</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_activated_2">Step 5: Activated</h5>
<div class="paragraph">
<p>If activation was successfull the alert will turn green as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_Activated.png" alt="Activate Licensing Activated">
</div>
<div class="title">Figure 25. Activated</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Brand_new_items">4. What&#8217;s new in Peach API Security v4.3 (2017 Q1)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is our first release of Peach API Security.  Everything in this release is new.
For future releases, check back here for information on product updates.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="Configuration">5. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach API Security comes with a default project that is ready to use out of the box.
New projects can also be created if needed.</p>
</div>
<div class="sect2">
<h3 id="_profiles">5.1. Profiles</h3>
<div class="paragraph">
<p>Profiles define different testing configurations primarily targetted at CI/CD support.
The default profile configurations should be fine for most users.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Quick</dt>
<dd>
<p>The Quick profile is used for tests that need a fast turnaround.
For example, builds performed during the day would use a Quick profile,
so they are not delayed by security testing.
+
The Quick profile should be used in combination with Nightly or Weekly.
+
Some checks are performed and fuzzing is disabled in the Quick profile.</p>
</dd>
<dt class="hdlist1">Nightly</dt>
<dd>
<p>The Nightly profile is used for overnight testing or testing that can take longer
to complete than Quick.
All checks are performed during nightly with some fuzzing.
+
It&#8217;s recommended to use Nightly in combination with Weekly.</p>
</dd>
<dt class="hdlist1">Weekly</dt>
<dd>
<p>The Weekly profile is used for testing over weekends. Weekly testing requires more time
to complete than the Nightly profile.
The Weekly profile performs is the amount of fuzzing that is
performed during testing.</p>
</dd>
<dt class="hdlist1">Full</dt>
<dd>
<p>The Full profile is used for single-shot testing.
It performs complete testing, including checks and fuzzing, in a single run.
+
This profile is recommended for manual runs</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_ignored_failures">5.2. Ignored Failures</h3>
<div class="paragraph">
<p>In the event a failure is a false positive or the team decides not to fix the issue, it
can be added to a list of ignored failures.
When a failure is ignored the following occures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Testing of this issue is still performed</p>
</li>
<li>
<p>This failure will no longer be reported via JUnit output</p>
</li>
<li>
<p>This failure will no longer be reported via ticketing integration (JIRA/Bugzilla)</p>
</li>
<li>
<p>This failure will no longer block builds</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any ignored failure will display in this section of the project configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssl_configuration">5.3. SSL Configuration</h3>
<div class="paragraph">
<p>The SSL Configuration section is used for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Overriding global configuration</p>
</li>
<li>
<p>Client certificate auth</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Client Certificate</dt>
<dd>
<p>Optionally specify a client certificate to use when authenticating to a target service.
If a client certificate is specified then the <em>Client Key</em> must also be specified.
Certificate must be in PEM format.</p>
</dd>
<dt class="hdlist1">Client Private Key</dt>
<dd>
<p>Optionally specify the matching secret key for the client certificate.
If a client key is specified then the <em>Client Certificate</em> must also be specified.
Secret key must be in PEM format with no password.</p>
</dd>
<dt class="hdlist1">CA Certificate</dt>
<dd>
<p>Optionally provide a CA certificate that will sign any auto-generated TLS certificates.
Certificates are auto-generated for targets using TLS.
To avoid trust issues in the traffic generator, a fixed CA certificate can be provided.
This requires also providing the <em>CA Private Key</em> and <em>Server Private Key</em>.
Certificate must be in PEM format.</p>
</dd>
<dt class="hdlist1">CA Private Key</dt>
<dd>
<p>Provide the matching CA Private Key for the CA Certificate.
Private key must be in PEM format with no password.</p>
</dd>
<dt class="hdlist1">Server Private Key</dt>
<dd>
<p>Provide a server private key that is used for auto-generated TLS certs.
Private key must be in PEM format with no password.</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_route_configuration">5.4. Route Configuration</h3>
<div class="paragraph">
<p>One or more routes can be configured for use with Peach API Security.
Each route contains several configuration parameters.
Route entries are matched in order.
It&#8217;s recommended that a final route entry be included with a Route pattern of <code>*</code> as a catch all.</p>
</div>
<div class="paragraph">
<p>Adding multiple routes allows different configurations based on matching a portion of the Path.
For example, if two different APIs are accessed during testing <em>/storage/*</em> and <em>/users/*</em>,
each can have a different route entry allowing for different fault status codes
or Swagger API specifications.</p>
</div>
<div class="paragraph">
<p><em>Required:</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Path Pattern</dt>
<dd>
<p>This pattern will match a specific route to a request.
Define a pattern that matches the HTTP request path (excluding the sheme, host, and query)
using single character wildcard (<code>?</code>) and multiple character wildcard (<code>*</code>).<br>
Examples: <code>/storage/*</code> or <code>*/v?/*</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Optional:</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Test</dt>
<dd>
<p>Should the route be included or excluded from testing.
This setting affects all requests that match the route.
Default to <em>included</em>.</p>
</dd>
<dt class="hdlist1">Swagger</dt>
<dd>
<p>Optionally provide the URL to a Swagger API JSON.
For example, <em><a href="http://127.0.0.1:8888/swagger/docs/v1" class="bare">http://127.0.0.1:8888/swagger/docs/v1</a></em> or <em><a href="file:///opt/service/swagger.js" class="bare">file:///opt/service/swagger.js</a></em></p>
</dd>
<dt class="hdlist1">Script</dt>
<dd>
<p>Optional python script.  Examples provided in SDK/scripts.
See <a href="#Scripts">Scripts</a> for a full explanation and examples.</p>
</dd>
<dt class="hdlist1">Rewrite Base URL</dt>
<dd>
<p>Optionally provide a new replacement base URL.
Only the scheme, host, and port are replaced.</p>
</dd>
<dt class="hdlist1">Failure Status Codes</dt>
<dd>
<p>Optionally provide a comma separated list of HTTP status codes that
will result in a test failing. When a test fails it is logged as a fault in the tool.
Example: <code>500,501</code></p>
</dd>
<dt class="hdlist1">Header Testing</dt>
<dd>
<div class="paragraph">
<p>This parameter controls what HTTP headers are included/excluded from testing.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Mutate</dt>
<dd>
<p>Include or exclude the header from mutation.</p>
</dd>
<dt class="hdlist1">Pattern</dt>
<dd>
<p>Pattern to match against HTTP headers.</p>
<div class="paragraph">
<p>Headers support pattern matching using the single character wildcard (<code>?</code>) or multiple character wildcard (<code>*</code>).</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">API Tokens</dt>
<dd>
<div class="paragraph">
<p>This parameter is used to list any/all authentication tokens parameter/headers used
by the APIs under test.
This will enable various checks related to API Tokens.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Include or exclude the header from mutation.</p>
</dd>
<dt class="hdlist1">Part</dt>
<dd>
<p>Where to find the api token, headers, body, etc.</p>
</dd>
<dt class="hdlist1">Expires</dt>
<dd>
<p>Expiration time for the token in minutes</p>
</dd>
<dt class="hdlist1">Signature</dt>
<dd>
<p>Is token a signature of the request (URL, headers, body, etc.)</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="CI">6. CI Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{product] currently provides generic CI integration via command line usage.
Future releases will include plugins for leading CI systems.</p>
</div>
<div class="sect2">
<h3 id="CI_GenericRunner">6.1. Generic CI Runner</h3>
<div class="paragraph">
<p>Generic integration with CI systems is provided by running a command that
returns non-zero when testing does not pass.
The vast majority of CI systems support this method of integration.</p>
</div>
<div class="paragraph">
<p>The generic CI integration script is available in SDK\ci\generic.</p>
</div>
<div class="paragraph">
<p>To use the script, configure your CI system to run this script after setting
correct environmental variables to provide needed configuration.</p>
</div>
<div class="sect3">
<h4 id="_ci_script_logic">6.1.1. CI Script Logic</h4>
<div class="paragraph">
<p>The generic CI runner has this high-level flow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Load environment variables</p>
</li>
<li>
<p>Start new testing session</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Call peachproxy.session_setup()</p>
</li>
<li>
<p>Peach API Security provides a proxy port and session id</p>
</li>
</ol>
</div>
</li>
<li>
<p>Launch automation</p>
</li>
<li>
<p>Poll Peach API Security to check if tests have finished</p>
</li>
<li>
<p>Wait for automation or kill after timeout</p>
</li>
<li>
<p>Send session teardown to Peach API Security</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Call peachproxy.session_teardown()</p>
</li>
</ol>
</div>
</li>
<li>
<p>If JUnit XML enabled:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Call peachproxy.junit_xml()</p>
</li>
<li>
<p>If failures exit with PEACH_EXIT_CODE_FAILURE</p>
</li>
<li>
<p>Else exit with PEACH_EXIT_CODE_OK</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If any hard failure occurs, exit with PEACH_EXIT_CODE_ERROR.</p>
</div>
</div>
<div class="sect3">
<h4 id="_environment_parameters">6.1.2. Environment Parameters</h4>
<div class="paragraph">
<p>These options are set as environmental variables.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">PEACH_API</dt>
<dd>
<p>URL to Peach API Security APIs.
If company policy prohibits the use of <em>http</em>, <em>https</em> can be specified instead.
This will cause testing to complete slower due to TLS negotiation.
This environmental is required.
Example: <code><a href="http://192.168.1.5" class="bare">http://192.168.1.5</a></code></p>
</dd>
<dt class="hdlist1">PEACH_API_TOKEN</dt>
<dd>
<p>URL to Peach API Security APIs.
This environmental is required.
Example: <code><a href="http://192.168.1.5" class="bare">http://192.168.1.5</a></code></p>
</dd>
<dt class="hdlist1">PEACH_PROJECT</dt>
<dd>
<p>Peach API Security project name.
This environmental is required.
Example: <code>Default</code></p>
</dd>
<dt class="hdlist1">PEACH_PROFILE</dt>
<dd>
<p>Project profile to use.
This environmental is required.
Example: <code>Nightly</code></p>
</dd>
<dt class="hdlist1">PEACH_AUTOMATION_CMD</dt>
<dd>
<p>Command line to launch test automation with Peach API Security integration.
This environmental is required.
Example: <code>python /opt/peachweb/sdk/examples/flask_rest_target/hand_fuzz.py</code></p>
</dd>
<dt class="hdlist1">PEACH_JUNIT (optional)</dt>
<dd>
<p>Generate standard JUNIT XML output of results.
This output can be used by CI&#8217;s like Jenkins to display
details of any failures directly in the CI.
Example: <code>junit-peachapisec.xml</code></p>
</dd>
<dt class="hdlist1">PEACH_UI (optional)</dt>
<dd>
<p>URL to Peach API Security UI if different from PEACH_API.
Default to PEACH_API setting.
Example: <code><a href="http://peachweb" class="bare">http://peachweb</a></code></p>
</dd>
<dt class="hdlist1">PEACH_VERBOSE (optional)</dt>
<dd>
<p>Show output from automation cmd.  Defaults to False.</p>
</dd>
<dt class="hdlist1">PEACH_SYSLOG_HOST (optional)</dt>
<dd>
<p>Syslog server host.
When set syslog logging is enabled with same log level as console.
Example: <code>corplogs.corp.com</code></p>
</dd>
<dt class="hdlist1">PEACH_SYSLOG_PORT (optional)</dt>
<dd>
<p>Syslog server port.
Defaults to 512.</p>
</dd>
<dt class="hdlist1">PEACH_EXIT_CODE_OK (optional)</dt>
<dd>
<p>Exit code to return when testing completed with no failure or errors.
Defaults to 0.</p>
</dd>
<dt class="hdlist1">PEACH_EXIT_CODE_FAILURE (optional)</dt>
<dd>
<p>Exit code to return when testing completed with no errors, but failures
were found.
Defaults to 1.</p>
</dd>
<dt class="hdlist1">PEACH_EXIT_CODE_ERROR (optional)</dt>
<dd>
<p>Exit code to return when testing did not complete due to errors.
Defaults to 100.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_usage">6.1.3. Usage</h4>
<div class="paragraph">
<p>To use the script, follow this process:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Install requirements</dt>
<dd>
<div class="paragraph">
<p>Install required python modules:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>pip install -r requirements.txt</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Run script</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Linux</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>PEACH_PROJECT=Default \
PEACH_PROFILE=Quick \
PEACH_API=http://10.10.10.10 \
PEACH_API_TOKEN=b5638ae7-6e77-4585-b035-7d9de2e3f6b3 \
PEACH_AUTOMATION_CMD=python testrunners/custom/python/hand_fuzz.py \
python ci/generic/peach_ci_runner.py</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Windows</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>set PEACH_PROJECT=Default
set PEACH_PROFILE=Quick
set PEACH_API=http://10.10.10.10
set PEACH_API_TOKEN=b5638ae7-6e77-4585-b035-7d9de2e3f6b3
set PEACH_AUTOMATION_CMD=python testrunners\custom\python\hand_fuzz.py
python ci\generic\peach_ci_runner.py</pre>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
During initial setup it&#8217;s useful to enable output from your test automation command by
setting <code>PEACH_VERBOSE=True</code>.  Remember to disable this once the configuration is working as
the output could be very large.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Peach API Security must be running prior to launching this script.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TrafficGen">7. Automated Test Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach has support for several automated test frameworks with more under development.
If your automation framework is not currently supported please let <a href="mailto:support@peachfuzzer.com">support@peachfuzzer.com</a> know
so it can be added to our list and an interim solution found.</p>
</div>
<div class="sect2">
<h3 id="tg_JUnit4">7.1. JUnit 4</h3>
<div class="paragraph">
<p>The JUnit 4 integration is an extension to JUnit 4 to create a Peach Suite of test cases.
Integration requires creating a special suite of unit tests.</p>
</div>
<div class="paragraph">
<p>Examples are provided with the source code:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">TestFlaskRestTarget.java</dt>
<dd>
<p>JUnit 4 test cases that operate against the <em>flask_rest_target</em>.</p>
</dd>
<dt class="hdlist1">FuzzFlashRestTarget.java</dt>
<dd>
<p>Example of a Peach Suite that uses the unit tests defined in <em>TestFlaskRestTarget</em>.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_installation">7.1.1. Installation</h4>
<div class="paragraph">
<p>Build with Maven or Netbeans. A resulting jar file is produced in the <em>target</em> folder.
Dependencies are in <em>target/lib</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_usage_2">7.1.2. Usage</h4>
<div class="paragraph">
<p>Create a suite similar to "FuzzFlashRestTarget.java".</p>
</div>
<div class="paragraph">
<p>Example usage:</p>
</div>
<div class="paragraph">
<p>All test classes to include are listed in the @PeachSuiteClasses attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@RunWith(com.peachfuzzer.web.frameworks.junit4.JUnit4PeachSuiteRunner.class)
@PeachSuiteClasses(TestFlaskRestTarget.class)
public class FuzzFlaskRestTarget {
    @BeforeClass
    public static void setProxy()
    {
        // Setup proxy options for our HTTP library

        // This code will vary depending on the HTTP library
        // in use.

        Options.setOption(Option.PROXY, new HttpHost("127.0.0.1", 8001));
    }

    @AfterClass
    public static void removeProxy()
    {
        // Remove any proxy options for our HTTP library

        // This code will vary depending on the HTTP library
        // in use.

        Options.setOption(Option.PROXY, null);
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running">7.1.3. Running</h4>
<div class="paragraph">
<p>The JUnit 4 runner is expected to be called from one of the CI integrations scripts.
It is not directly callable as it expects session setup to have already been performed.</p>
</div>
<div class="paragraph">
<p>For JUnit 4 runner, Peach controls when the runner should stop.</p>
</div>
<div class="paragraph">
<p>The following environment variables are expected to bet set when called.
These variables are normally set by the CI runner automatically:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">PEACH_API</dt>
<dd>
<p>URL to Peach API Security API. Ex. <a href="http://10.0.0.1" class="bare">http://10.0.0.1</a></p>
</dd>
<dt class="hdlist1">PEACH_API_TOKEN</dt>
<dd>
<p>API Token for Peach API Security</p>
</dd>
<dt class="hdlist1">PEACH_SESSIONID</dt>
<dd>
<p>ID for current testing session. Returned from /api/sessions API.</p>
</dd>
<dt class="hdlist1">PEACH_PROXY</dt>
<dd>
<p>URL to current proxy instance. Returned from /api/sessions API. Ex. <a href="http://10.0.0.1:1234" class="bare">http://10.0.0.1:1234</a></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example PEACH_AUTOMATION_CMD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>PEACH_AUTOMATION_CMD="java -cp \"testrunners/JUnit4Peach/target/JUnit4Peach-1.0-SNAPSHOT.jar;libraries/java/target/PeachProxy-1.0-SNAPSHOT.jar;testrunners/JUnit4Peach/target/lib/*\" org.junit.runner.JUnitCore com.peachfuzzer.web.junit4.examples.FuzzFlaskRestTarget"</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="tg_pyunit">7.2. Python Unit test (PyUnit)</h3>
<div class="paragraph">
<p>The Python unit testing framework, sometimes referred to as PyUnit, is one
of the most common test automation frameworks for Python.
A modified version of this framework is provided in the SDK.
The modified version makes it possible to use existing PyUnit tests with
Peach API Security.
The modified version makes use of the peachproxy python library and is
suitable for being launched by the provided CI runners.</p>
</div>
<div class="paragraph">
<p>The modified PyUnit will call each test in a loop until Peach API
Security completes testing, then move on to looping the next test.
This continues until testing has completed.  The output from PyUnit
will show the total number of unique tests complete, but will not
show the actual call count for each test.</p>
</div>
<div class="paragraph">
<p>The following environmental proxy variables are automatically set.
If your test cases require custom settings to use an HTTP proxy
they will need to be set externally or inside the test logic.
No other modification is required to use PyUnit automated
tests with Peach API Security.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure <code>PYTHONPATH</code> environmental variable is set and
points to the modified version of PyUnit.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_examples">7.2.1. Examples</h4>
<div class="exampleblock">
<div class="title">Example 1. test_flaskresttarget.py</div>
<div class="content">
<div class="paragraph">
<p>Included in the <code>SDK/testrunners/unittest</code> folder is an example
PyUnit that targets the Flask REST Target available in
<code>SDK/examples/flask_rest_target</code>.
The example can be run directly to see it&#8217;s operation with the
normal PyUnit framework.  It can also be run via the generic CI
runner to see it&#8217;s operation with Peach API Security.</p>
</div>
<div class="paragraph">
<p>When running with the CI integration make sure the <code>PYTHONPATH</code>
environmental variable is set correctly.
Additionally the Flask REST Target must be running.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_peach_automation_cmd">7.2.2. PEACH_AUTOMATION_CMD</h4>
<div class="paragraph">
<p>Add a PYTHONPATH environment variable prior to calling CI script.
This will make sure the Peach API Security version of PyUnit is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>PYTHONPATH=testrunners\unittest\unittest
PEACH_AUTOMATION_CMD="python testrunners/unittest/test_flaskresttarget.py"</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="tg_pytest">7.3. pytest</h3>
<div class="paragraph">
<p>pytest-peach is a plugin for <a href="http://pytest.org">pytest</a> that integrates with Peach API Security.
Integration includes calling the correct Peach API Security APIs to report test names and
disable testing of setup/teardown methods. It&#8217;s available in the SDK as "sdk\testrunners\pytest".
The plugin builds and installs via the command "python setup.py install".
The plugin is also available via pip "pip install pytest-peach".</p>
</div>
<div class="sect3">
<h4 id="_requirements">7.3.1. Requirements</h4>
<div class="paragraph">
<p>You will need the following prerequisites in order to use pytest-peach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Python 2.6, 2.7, 3.2, 3.3, 3.4, 3.5 or PyPy</p>
</li>
<li>
<p>pytest 2.8 or newer</p>
</li>
<li>
<p>Requests v2.11 or newer</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_installation_2">7.3.2. Installation</h4>
<div class="paragraph">
<p>To install pytest-peach plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ pip install pytest-repeat</pre>
</div>
</div>
<div class="paragraph">
<p><strong>From Source</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ python setup.py install</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usage_3">7.3.3. Usage</h4>
<div class="listingblock">
<div class="content">
<pre>pytest --peach=on test_target.py</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="paragraph">
<p><em>Required</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--peach=true</dt>
<dd>
<p>This argument enables the pytest Peach API Security extension.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_example_peach_automation_cmd">7.3.4. Example PEACH_AUTOMATION_CMD</h4>
<div class="literalblock">
<div class="content">
<pre>PEACH_AUTOMATION_CMD="pytest --peach=on testrunners/pytest/tests/test_target.py"</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="tg_Selenum">7.3.5. Selenium</h4>
<div class="paragraph">
<p>Selenium test cases can be used with Peach API Security by exporting them to a supported framework.
For example, the JUnit 4 integration has an example of using exported Selenium test cases.
The exported Selenium test cases have been modified to set the Proxy value in the target
web driver and also to cache the web driver via a custom base class.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Modify the selenium output to cache the Web Driver. The examples included in the JUnit 4 test runner
SDK folder provide an example of this.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="sect4">
<h5 id="tg_Custom">Custom Traffic Generators</h5>
<div class="paragraph">
<p>Custom traffic generators exercise the web APIs being tested in a loop.
This allows performing some test setup/tear down independent of the fuzzed API calls.
The traffic generator should produce traffic until a call to the Peach API Security Proxy APIs fail.
This allows Peach to direct the length of testing.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An example traffic generator is included in the SDK as <em>SDK\testrunner\custom\python\hand_fuzz.py</em>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Instead of writing a custom traffic generator from scratch consider writing a small
automated test in pytest, pyunit or junit4.  You can then leverage existing plugins for
these test runners.  This is typically easier than writing a custom traffic generator script.
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="_logic_flow_from_ci_integration">Logic flow from CI integration</h6>
<div class="paragraph">
<p>This the the expected logic flow for custom traffic generators.
Traffic generators should use an existing library for implementation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Loop over test(s)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Call Peach libraries setup method</p>
</li>
<li>
<p>Optionally perform any setup related logic (not tested)</p>
</li>
<li>
<p>Call Peach libraries test method</p>
</li>
<li>
<p>Generate traffic that is tested</p>
</li>
<li>
<p>Call Peach libraries test teardown method</p>
</li>
<li>
<p>Optionally perform any teardown logic (not tested)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Call libraries suite teardown method</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="_logic_flow_with_no_ci_integration">Logic flow with no CI integration</h6>
<div class="paragraph">
<p>This the the expected logic flow for custom traffic generators.
Traffic generators should use an existing library for implementation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Call Session Setup method of library</p>
</li>
<li>
<p>Loop over test(s)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Call Peach libraries setup method</p>
</li>
<li>
<p>Optionally perform any setup related logic (not tested)</p>
</li>
<li>
<p>Call Peach libraries test method</p>
</li>
<li>
<p>Generate traffic that is tested</p>
</li>
<li>
<p>Call Peach libraries test teardown method</p>
</li>
<li>
<p>Optionally perform any teardown logic (not tested)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Call libraries suite teardown method</p>
</li>
<li>
<p>Call libraries session teardown method</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="_examples_2">Examples</h6>
<div class="exampleblock">
<div class="title">Example 2. Python</div>
<div class="content">
<div class="paragraph">
<p>An example traffic generator is included in the SDK as <em>SDK\testrunner\custom\python\hand_fuzz.py</em>.
This example expected to be called form a CI integration script.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ChecksAndAsserts">8. Checks and Asserts</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section still under construction.
Information provided is partial and may be out of date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section includes information about each Check and Assert in Peach API Security.
For each check information about what is tested and how to configure is provided.</p>
</div>
<div class="sect2">
<h3 id="_checks">8.1. Checks</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section still under construction.
Information provided is partial and may be out of date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Checks are broken up into global, passive, active and mutational&#8230;&#8203;.</p>
</div>
<div class="sect3">
<h4 id="Check_CleartextAuthentication">8.1.1. Cleartext Authentication Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A6-Sensitive_Data_Exposure">2013-A6-Sensitive Data Exposure</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/319.html">CWE-319: Cleartext Transmission of Sensitive Information</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.4 Insecure communications</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Cleartext authentication vulnerabilities occur when authentication credentials are
transported via unencrypted channels such as HTTP.
This exposes the transmitted credentials to any attacker who can monitor (sniff) the network
traffic during transmition.
Sensitive information such as credentials should always be trasmitted via encrypted channels such as HTTPS.</p>
</div>
<div class="paragraph">
<p>Type of authentication mechanisms supported by check:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP Basic Authentication</p>
</li>
<li>
<p>API Token</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_configuration">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passive on all requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No test generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No traffic generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a global check, global checks operate on all responses and log messages for the defined scope
(project or route).  Each response is analyzed to detect use of cleartext authentication over
unencrypted channels.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_HtmlInjection">8.1.2. HTML Injection Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A3-Cross-Site_Scripting_(XSS)">2013-A3-Cross-Site Scripting (XSS)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/79.html">CWE-79: Improper Neutralization of Input During Web Page Generation (<em>Cross-site Scripting</em>)</a><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.7 Cross site scripting (XSS)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Cross-site Scripting (XSS) is an attack technique that involves echoing attacker-supplied code into
a user&#8217;s browser instance. A browser instance can be a standard web browser client, or a browser object
embedded in a software product, such as the browser within WinAmp, an RSS reader, or an email client.
The code itself is usually written in HTML/JavaScript, but may also extend to VBScript, ActiveX, Java,
Flash, or any other browser-supported technology.</p>
</div>
<div class="paragraph">
<p>This check injects various HTML snippets that demonstrate an XSS issue.
The response is then analyzed to determine if the XSS injection has been included in any
field or response body identified as containing HTML.</p>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a list of HTML injections.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to add, edit or remote entries.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This check has limited ability to determine if XSS issues exist in your front-end application.
The detection process is limited to analysis of API results.
To reduce false positives, failures only occur when the field or response is known to HTML.
For fields, the field must contain
other HTML elements.
For response bodies the content type must be text/html.
This is not a substitue for testing your front-end application.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_configuration_2">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_2">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_JsonInjection">8.1.3. JSON Injection Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A1-Injection">2013-A1-Injection</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/929.html">CWE-929: OWASP Top Ten 2013 Category A1 - Injection</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.1 Injection flaws</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>JSON Injection is an attack technique used to manipulate or compromise the
logic of a JSON application or service. The injection of unintended JSON content
and/or structures into a JSON message can alter the intended logic of the
application. Further, JSON injection can cause the insertion of malicious content
into the resulting message/document.</p>
</div>
<div class="paragraph">
<p>This check injects various special JSON characters that demonstrate an injection issue.
The response is then analyzed to determine if the JSON injection has been included in any
response body identified as contianing JSON.</p>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a list of JSON injections.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_configuration_3">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_3">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_SensitiveFile">8.1.4. Sensitive File Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A6-Sensitive_Data_Exposure">2013-A6-Sensitive Data Exposure</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/200.html">CWE-200: Information Exposure</a><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.5 Information leakage and improper error handling</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Information Leakage is an application weakness where an application reveals sensitive data,
such as technical details of the web application, environment, or user-specific data.
Sensitive data may be used by an attacker to exploit the target web application, its hosting
network, or its users. Therefore, leakage of sensitive data should be limited or prevented
whenever possible. Information Leakage, in its most common form, is the result of one or more
of the following conditions: A failure to scrub out HTML/Script comments containing sensitive
information, improper application or server configurations, or differences in page responses
for valid versus invalid data.</p>
</div>
<div class="paragraph">
<p>For this check the weakness is one or more files and/or folders being accessable that should
not be.
This can include files common in home folders like such as command histories or files that
contain secrets such as passwords.</p>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a list of common files/folders to check for.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to add, edit or remote entries.</p>
</div>
<div class="paragraph">
<p>Detection is based on result code.
If default error pages are used with a successful result code, a regular expression can be
used to detect the error page instead of status code.</p>
</div>
<div class="sect4">
<h5 id="_configuration_4">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_4">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_SensitiveInformation">8.1.5. Sensitive Information Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A6-Sensitive_Data_Exposure">2013-A6-Sensitive Data Exposure</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/200.html">CWE-200: Information Exposure</a><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.5 Information leakage and improper error handling</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Information Leakage is an application weakness where an application reveals sensitive data,
such as technical details of the web application, environment, or user-specific data.
Sensitive data may be used by an attacker to exploit the target web application, its hosting
network, or its users. Therefore, leakage of sensitive data should be limited or prevented
whenever possible. Information Leakage, in its most common form, is the result of one or more
of the following conditions: A failure to scrub out HTML/Script comments containing sensitive
information, improper application or server configurations, or differences in page responses
for valid versus invalid data.</p>
</div>
<div class="paragraph">
<p>This check performs analysis of API responses and log messagess to detect the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database error messages</p>
</li>
<li>
<p>Framework/server error messages</p>
</li>
<li>
<p>Sensitive PII</p>
</li>
<li>
<p>Version dislosure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a large list of regular expressions that are matched against
responses and log messages.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to
add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_configuration_5">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_5">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passive on all requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No test generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No traffic generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a global check, global checks operate on all responses and log messages for the defined scope
(project or route).  Each response is analyzed to detect any configured regex matches.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_SessionCookie">8.1.6. Session Cookie Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A6-Sensitive_Data_Exposure">2013-A2-Broken Authentication and Session Management</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A2-Broken_Authentication_and_Session_Management">CWE-930: OWASP Top Ten 2013 Category A2 - Broken Authentication and Session Management</a><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.10 Broken authentication and session management</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Since HTTP is a stateless protocol, Web sites commonly use cookies to store session
IDs that uniquely identify a user from request to request. Consequently, each
session ID&#8217;s confidentiality must be maintained in order to prevent multiple users
from accessing the same account. A stolen session ID can be used to view another
user&#8217;s account or perform a fraudulent transaction.</p>
</div>
<div class="paragraph">
<p>One part of securing session ID&#8217;s is to property mark them to expire and also require
the correct set of flags to ensure they are not transmitted in the clear or accessible
from scripting.</p>
</div>
<div class="paragraph">
<p>This check performs the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify HttpOnly flag</p>
</li>
<li>
<p>Verify Secure flag</p>
</li>
<li>
<p>Verify expiration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a large of regular expressions that are used
to identify which cookie is the session identifier.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to
add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_configuration_6">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_6">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passive on all requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No test generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No traffic generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a global check, global checks operate on all responses for the defined scope
(project or route).  Each response is analyzed to detect any configured regex matches.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_SqlInjection">8.1.7. SQL and NoSQL Injection Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A3-Cross-Site_Scripting_(XSS)">2013-A3-Cross-Site Scripting (XSS)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/89.html">Improper Neutralization of Special Elements used in an SQL Command (<em>SQL Injection</em>)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A1 Injection</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A SQL injection attack consists of insertion or "injection" of a SQL query via the input
data from the client to the application.
A successful SQL injection exploit can read sensitive data from the database, modify
database data (Insert/Update/Delete), execute administrative operations on the database
(such as shutdown the DBMS), recover the content of a given file present on the DBMS
file system, and in some cases issue commands to the operating system.
SQL injection attacks are a type of injection attack, in which SQL commands are injected
into data-plane input in order to effect the execution of predefined SQL commands.</p>
</div>
<div class="paragraph">
<p>This check modifies parameters in the request (path, query string, headers, json, xml, etc.)
to try and create a syntax error in the SQL or NoSQL query.  Logs and responses are then
analyzed to try and detect if an error occured.  If an error is detected there is a high
likelyhood that a vulnerability exists.</p>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a list of values used to cause SQL and NoSQL queries to fail.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_configuration_7">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_7">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_Token">8.1.8. Token Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A2-Broken_Authentication_and_Session_Management">A2-Broken Authentication and Session Management</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/285.html">CWE-285: Improper Authorization</a> <a href="https://cwe.mitre.org/data/definitions/331.html">CWE-331: Insufficient Entropy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.10 Broken authentication and session management</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>API Tokens are a common method of authenticating/authorizing access to APIs.
When used, this check performs up to four different validations of the tokens use.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Entropy</dt>
<dd>
<p>API Tokens must be unpredictable (random enough) to prevent guessing attacks, where an attacker is able
to guess or predict a valid API Token through statistical analysis techniques.
For this purpose, a good PRNG (Pseudo Random Number Generator) must be used.</p>
<div class="paragraph">
<p>API Tokens entropy is checked against the configured minimum (defaults to 128 bits).</p>
</div>
</dd>
<dt class="hdlist1">Modification of Token</dt>
<dd>
<p>The value of the API token is modified one for every operation it&#8217;s used with.
The HTTP status code of the response message is then checked to see if the request was successful.</p>
</dd>
<dt class="hdlist1">Removal of Token</dt>
<dd>
<p>The API token is removed from the HTTP request.
The HTTP status code of the response message is then checked to see if the request was successful.</p>
</dd>
<dt class="hdlist1">Signature Modification</dt>
<dd>
<p>When using API Tokens that are signatures of the request, a modification to the request is made.
The HTTP status code of the response message is then checked to see if the request was successful.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_configuration_8">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_8">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Check_XmlInjection">8.1.9. XML Injection Check</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OWASP Top 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.owasp.org/index.php/Top_10_2013-A1-Injection">2013-A1-Injection</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://cwe.mitre.org/data/definitions/79.html">CWE-79: Improper Neutralization of Input During Web Page Generation (<em>Cross-site Scripting</em>)</a><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5.1 Injection flaws</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>XML Injection is an attack technique used to manipulate or compromise the
logic of an XML application or service. The injection of unintended XML content
and/or structures into an XML message can alter the intended logic of the
application. Further, XML injection can cause the insertion of malicious content
into the resulting message/document.</p>
</div>
<div class="paragraph">
<p>This check injects various special XML characters that demonstrate an injection issue.
The response is then analyzed to determine if the XML injection has been included in any
response body identified as containing XML.</p>
</div>
<div class="paragraph">
<p>The check comes pre-populated with a list of XML injections.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_configuration_9">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect4">
<h5 id="_operation_9">Operation</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test generation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a mutational check that produces test cases by modifying requests made by the traffic generator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asserts">8.2. Asserts</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section still under construction.
Information provided is partial and may be out of date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Asserts are methods used to detect failures during testing.</p>
</div>
<div class="sect3">
<h4 id="Assert_SensitiveInformation">8.2.1. Sensitive Information Assert</h4>
<div class="paragraph">
<p>Information Leakage is an application weakness where an application reveals sensitive data,
such as technical details of the web application, environment, or user-specific data.
Sensitive data may be used by an attacker to exploit the target web application, its hosting
network, or its users. Therefore, leakage of sensitive data should be limited or prevented
whenever possible. Information Leakage, in its most common form, is the result of one or more
of the following conditions: A failure to scrub out HTML/Script comments containing sensitive
information, improper application or server configurations, or differences in page responses
for valid versus invalid data.</p>
</div>
<div class="paragraph">
<p>This assert performs analysis of API responses and log messages to detect the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database error messages</p>
</li>
<li>
<p>Framework/server error messages</p>
</li>
<li>
<p>Sensitive PII</p>
</li>
<li>
<p>Version dislosure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The assert comes pre-populated with a large list of regular expressions that are matched against
responses and log messages.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to
add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_related_checks">Related Checks</h5>
<div class="paragraph">
<p><a href="#Check_SensitiveInformation">Sensitive Information Check</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_configuration_10">Configuration</h5>
<div class="paragraph">
<p>TODO</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="Assert_StatusCode">8.2.2. Status Code Assert</h4>
<div class="paragraph">
<p>The status code assert is used to cause failures when a response message&#8217;s status code field does
not match the required values.  This assert can work with whitelists or blacklists of status codes.
Whitelists are lists of valid values, a failure is raised when a status code is found that is not
included in the whitelist.  Blacklists work in the opposite manor, status codes that match the
list cause a failure to occur.</p>
</div>
<div class="paragraph">
<p>The assert comes pre-populated with a  list of error status codes.
The provided list can be editted at various scope levels (Global, Project, Profile, Route) to
add, edit or remote entries.</p>
</div>
<div class="sect4">
<h5 id="_related_checks_2">Related Checks</h5>
<div class="ulist">
<ul>
<li>
<p><a href="#Check_SqlInjection">SQL and NoSQL Injection Check</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_configuration_11">Configuration</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Is White List</dt>
<dd>
<p>Indicates if the provided StatusCodes list should be treated as a whitelist or blacklist.
When StatusCodes is a whitelist, any status code returned that is not included in the list
will cause this assert to fail. For blacklist operation, only status codes in the list
will trigger a failure.  Defaults to false, blacklist operation.</p>
</dd>
<dt class="hdlist1">Status Codes</dt>
<dd>
<p>List of status codes that will be used to validate responses.
Defaults to 500, 501, 502, 504</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Auth">9. Authenticated Services</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section still under construction.
Information provided is partial and may be out of date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Most service authentication mechanisms work automatically with Peach API Security with only two main exceptions.
Mechanisms that work include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cookie based auth</p>
</li>
<li>
<p>Username/password over TLS</p>
</li>
<li>
<p>API Token</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The two authentication types that require some special configuration are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TLS User Certificates</p>
</li>
<li>
<p>Hashed/computed keys. For example, AWS authentication includes the hash of headers and body</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_tls_user_certificates">9.1. TLS User Certificates</h3>
<div class="paragraph">
<p>TLS user certificates are well supported by Peach API Security and only require small configuration changes to get working.</p>
</div>
<div class="paragraph">
<p>The current version of Peach API Security only supports a single set of client certificates.
The certificate and matching private key can be set in the <em>WebProxy</em> configuration on the variables
screen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hashed_computed_keys">9.2. Hashed/computed keys</h3>
<div class="paragraph">
<p>Some authentication systems, such as those used with major cloud providers like Amazon AWS, require
computing the authentication token.  When computed tokens include parts of the HTTP request, a custom
script must be created that is called by Peach API Security any time a request is about to be sent.</p>
</div>
<div class="paragraph">
<p>See <a href="#Scripts">Scripts</a> for more information and an example.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="Scripts">9.3. Scripts</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This section is still under construction.
Information provided is partial and may be out of date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <em>Script</em> configuration option allows custom code to be run after fuzzing but prior to sending outgoing HTTP requests.
This is typically used to implement custom authentication required by the target web service.
When the script is imported, it registers a function with the <code>peach.webproxy</code> python module.
The function will then be called with every outgoing request after all fuzzing has taken place.
This allows arbitrary changes to be made on a per request basis.
Headers can be added/removed and the body can be altered if needed.</p>
</div>
<div class="paragraph">
<p>The source code to the webproxy module is available in the <em>Scripts</em> sub-folder of your Peach installation.
For development purposes, you can also add the <em>Scripts</em> sub-folder to your <em>PYTHONPATH</em> environment variable.
This will enable the testing of python scripts outside of the webproxy scripting environment.</p>
</div>
<div class="sect3">
<h4 id="__code_peach_webproxy_code_module">9.3.1. <code>peach.webproxy</code> module</h4>
<div class="paragraph">
<p>This module is the API that all custom scripts will use to interact with the webproxy.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>peach.webproxy.</code><strong>register_event</strong><em>(kind, fn)</em></dt>
<dd>
<div class="paragraph">
<p>This function is called to register a user defined function <code>fn</code> with the webproxy.
The function will be called whenever the specified <code>kind</code> of event is triggered.</p>
</div>
<div class="paragraph">
<p>Supported values for event <code>kind</code> argument:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>peach.webproxy.</code><strong>EVENT_ACTION</strong></dt>
<dd>
<div class="paragraph">
<p>Occurs after an incoming HTTP request has been
processed by the webproxy but before the request has been sent to the destination.<br></p>
</div>
<div class="paragraph">
<p>The user defined function for this event must accept three arguments:
<code>context</code> <code>request</code> and <code>body</code>.<br></p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Subscribing to the <code>EVENT_ACTION</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">from peach import webproxy

def callback_fn(context, request, body):
    print 'Event fired!'

webproxy.register_event(webproxy.EVENT_ACTION, callback_fn)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="__code_peach_webproxy_request_code_object">9.3.2. <code>peach.webproxy.Request</code> object</h4>
<div class="paragraph">
<p>This object contains all the information about the current HTTP request.
Requests have the following attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">method</dt>
<dd>
<p>The method of the HTTP request.</p>
</dd>
<dt class="hdlist1">uri</dt>
<dd>
<p>The <a href="#peach_webproxy_Uri">peach.webproxy.Uri</a> object of the HTTP request.</p>
</dd>
<dt class="hdlist1">host</dt>
<dd>
<p>The value of the HTTP <code>Host</code> header.  Returns <em>None</em> if the <code>Host</code> header is not defined.</p>
</dd>
<dt class="hdlist1">contentLength</dt>
<dd>
<p>The value of the HTTP <code>Content-Length</code> header.  Returns <em>None</em> if the <code>Content-Length</code> header is not defined.</p>
</dd>
<dt class="hdlist1">contentEncoding</dt>
<dd>
<p>The value of the HTTP <code>Content-Encoding</code> header.  Returns <em>None</em> if the <code>Content-Encoding</code> header is not defined.</p>
</dd>
<dt class="hdlist1">contentType</dt>
<dd>
<p>The value of the HTTP <code>Content-Type</code> header.  Returns <em>None</em> if the <code>Content-Type</code> header is not defined.</p>
</dd>
<dt class="hdlist1">headers</dt>
<dd>
<div class="paragraph">
<p>A dictionary containing all headers in the HTTP request.  The key is not case sensitive.
The value of the dictionary is a list of <a href="#peach_webproxy_Header">peach.webproxy.Header</a> objects.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Get header value</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">if 'Cookie' in request.headers:
    print 'Cookie: %s' request.headers['Cookie'][0].value
else:
    print 'Not Found'</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Add/change header value</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">request.headers['X-Custom-Header'] = 'header value'</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Delete header</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">del request.headers['X-Custom-Header']</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="peach_webproxy_Uri">9.3.3. <code>peach.webproxy.Uri</code> object</h4>
<div class="paragraph">
<p>This object contains all the information about the current HTTP request.
Requests have the following attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">scheme</dt>
<dd>
<p>The scheme portion of the uri. Example: <em>http://</em></p>
</dd>
<dt class="hdlist1">host</dt>
<dd>
<p>The host portion of the uri. Example: <em>peachfuzzer.com</em></p>
</dd>
<dt class="hdlist1">port</dt>
<dd>
<p>The port portion of the uri. Example: <em>80</em></p>
</dd>
<dt class="hdlist1">path</dt>
<dd>
<p>The path portion of the uri. Example: <em>/api/v1/users</em></p>
</dd>
<dt class="hdlist1">query</dt>
<dd>
<p>The query portion of the uri. Example: <em>?filter=true</em></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="peach_webproxy_Header">9.3.4. <code>peach.webproxy.Header</code> object</h4>
<div class="paragraph">
<p>This object contains the information for a single HTTP header.
Headers have the following attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>The name of the HTTP header. Example: <em>Accept-Charset</em></p>
</dd>
<dt class="hdlist1">value</dt>
<dd>
<p>The value of the HTTP header. Example: <em>utf-8</em></p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title">Example 4. Sample AWS Authentication Script</div>
<div class="content">
<div class="paragraph">
<p>This example demonstrates how to set the <code>Authorization</code> header in every outgoing request.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See SDK/scripts for a recent working example.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">from peach import webproxy <i class="conum" data-value="1"></i><b>(1)</b>

import base64
import hmac

from hashlib import sha1
from email.Utils import formatdate

AWS_ACCESS_KEY_ID = 'AWS_ACCESS_KEY_ID'
AWS_SECRET_KEY = 'AWS_SECRET_KEY'

def aws_auth(ctx, req, body): <i class="conum" data-value="2"></i><b>(2)</b>
    XAmzDate = formatdate()

    hdrs = '%s\n\n%s\n\nx-amz-date:%s\n/?policy' % (req.method, req.contentType, XAmzDate)
    h = hmac.new(AWS_SECRET_KEY, hdrs, sha1)
    authToken = base64.encodestring(h.digest()).strip()

    req.headers['x-amz-date'] = XAmzDate
    req.headers['Authorization'] = 'AWS %s:%s' % (AWS_ACCESS_KEY_ID, authToken) <i class="conum" data-value="3"></i><b>(3)</b>

webproxy.register_event(webproxy.EVENT_ACTION, aws_auth) <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import peach.webproxy module to register for events</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Function has three arguments: Context, Request, Body</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the header value</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Register function with Peach API Security</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="IssueTracker">10. Issue Tracker Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach API Security can automatically submit security findings into an issue tracking system such as JIRA or Bugzilla.
Submitted tickets can then be reviewed by the engineering team and go through a typical issue workflow.
Peach API Security supports two ticketing systems out of the box, JIRA and Bugzilla.
Other systems can be supported by modifying one of the example Python scripts.</p>
</div>
<div class="paragraph">
<p>Issue tracker integrations are provided as python scripts.
These scripts can be used in two ways with Peach API Security:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">CI Runner</dt>
<dd>
<p>Launched by the CI integration runner.
In this method the generic CI runner or CI plugin is configured to launch the issue tracker integration script
when the testing has completed.</p>
<div class="paragraph">
<p>The issue tracker integration scripts use the <code>PEACH_API</code> and <code>PEACH_API_TOKEN</code> environment variables to specify the Peach API Security instance to query for fault data.</p>
</div>
<div class="paragraph">
<p>This is the recommended solution when integrating into a CI system.</p>
</div>
</dd>
<dt class="hdlist1">External Entity/By Hand</dt>
<dd>
<p>Launched by an external actor or by hand.
An external automation tool is configured to run the issue tracker integration script.
Peach must be running but finished testing when the script is run, as it uses
Peaches API to extract the fault data.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_jira">10.1. JIRA</h3>
<div class="paragraph">
<p>The script is located in <em>SDK/issuetrackers/jira</em>.</p>
</div>
<div class="paragraph">
<p>Core features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single issue per bucket</p>
<div class="ulist">
<ul>
<li>
<p>Add comment when reproduced</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional custom field needed for best operation</p>
</li>
<li>
<p>Apply zero or more labels to created issues</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuration_12">10.1.1. Configuration</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Python v2.7</p>
</li>
<li>
<p>Install dependencies <code>pip install -r requirements.txt</code></p>
</li>
<li>
<p>Configure JIRA</p>
</li>
<li>
<p>Update <code>settings.json</code> file with configuration</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="__em_jira_configuration_em"><em>JIRA Configuration</em></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a user with access to project and REST API.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Add custom bucket field (optional)</div>
<p>To enable single issue per-bucket a custom issue field is required.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add custom field (Admin &#8594; Project &#8594; Fields &#8594; Custom fields &#8594; Add Custom Field)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Text Field (single line)</p>
</li>
<li>
<p>Name: Peach Bucket</p>
</li>
</ol>
</div>
</li>
<li>
<p>Add field to Issue type "Bug"</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bugzilla">10.2. Bugzilla</h3>
<div class="paragraph">
<p>The script is located in <em>SDK/issuetrackers/bugzilla</em>.</p>
</div>
<div class="paragraph">
<p>Core features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single ticket per bucket</p>
<div class="ulist">
<ul>
<li>
<p>Add comment when reproduced</p>
</li>
<li>
<p>Re-open resolved issues when re-found</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional custom field needed for best operation</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuration_13">10.2.1. Configuration</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Python v2.7</p>
</li>
<li>
<p>Install dependencies <code>pip install -r requirements.txt</code></p>
</li>
<li>
<p>Configure Bugzilla</p>
</li>
<li>
<p>Update <code>settings.json</code></p>
</li>
<li>
<p>Test integration with existing job</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_bugzilla_configuration">Bugzilla Configuration</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a user with access to project and REST API.</p>
</li>
<li>
<p>Create an API key for the user and update <code>settings.json</code> file</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Add custom bucket field (optional)</div>
<p>To enable single issue per-bucket a custom issue field is required.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add custom field (Admin &#8594; Custom Fields &#8594; Add a new custom field)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Name: cf_peach</p>
</li>
<li>
<p>Description: Peach</p>
</li>
<li>
<p>Type: Free Text</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="LogSink">11. Log Sink</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A single global log sink is automatically configured at port 512.
Logs sent to this sink during testing will be analyzed by the current testing job.
Logs are expected in syslog format which is supported by most logging frameworks.</p>
</div>
<div class="paragraph">
<p>The default syslog port (udp/512) is open on the virtual appliance.
Multiple log sources can be configured to send to this port.
The majority of logging frameworks support syslog style network logs.
If they do not, an adapter can usually be written quickly.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_sdk">12. SDK</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach API Security comes with an SDK that includes integrations, examples and API libraries
used to setup your installation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CI/CD integrations</p>
</li>
<li>
<p>Automated testing integrations</p>
</li>
<li>
<p>Libraries for custom integrations/tools</p>
</li>
<li>
<p>Issue tracker integrations</p>
</li>
<li>
<p>Command line tool</p>
</li>
<li>
<p>Example run scripts</p>
</li>
<li>
<p>Example Jenkins setup (via docker-compose)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_downloading_sdk">12.1. Downloading SDK</h3>
<div class="paragraph">
<p>The SDK can be downloaded from Peach API Security via "Help &#8594; SDK" in the top menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/SDK/DownloadSdk.png" alt="DownloadSdk">
</div>
<div class="title">Figure 26. SDK Download</div>
</div>
</div>
<div class="sect2">
<h3 id="_sdk_contents">12.2. SDK Contents</h3>
<div class="paragraph">
<p>The Peach API Security SDK contains various integrations, examples and samples.
The SDK is organized by category as outlined below.</p>
</div>
<div class="paragraph">
<p>SDK Contents:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ci\</dt>
<dd>
<p>CI/CD integrations.  Currently only a generic CI
integration is included that works with all CI
systems.</p>
</dd>
<dt class="hdlist1">cli\</dt>
<dd>
<p>Peach API Security command line interface.</p>
</dd>
<dt class="hdlist1">issuetrackers\</dt>
<dd>
<p>Integrations with issue trackers such as JIRA and
bugzilla.  These are also good examples to base
custom integrations on.</p>
</dd>
<dt class="hdlist1">libraries\</dt>
<dd>
<div class="paragraph">
<p>Libraries in different languages for accessing the
Peach API Security API.  These libraries are used
by the various CI integrations and test runners.</p>
</div>
<div class="paragraph">
<p>These libraries are also used when creating custom
traffic generators or CI integrations.</p>
</div>
</dd>
<dt class="hdlist1">scripts\</dt>
<dd>
<p>Example scripts that can be configured with routes
to provide advanced authentication methods.  These
tend to include HMACs of request content.  An
example would be Amazon AWS authentication.</p>
</dd>
<dt class="hdlist1">targets\</dt>
<dd>
<p>Sample targets that can be tested with Peach API Security.
The provided examples make use of these test targets.</p>
</dd>
<dt class="hdlist1">testrunners\</dt>
<dd>
<p>Test framework integrations.  This includes
frameworks like JUnit, NUnit, PyUnit, py.test, etc.</p>
</dd>
<dt class="hdlist1">docker-compose.yml</dt>
<dd>
<p>Creates an example target with Jenkins installed.</p>
</dd>
<dt class="hdlist1">run_test*</dt>
<dd>
<p>Scripts to run Peach API Security jobs from the
commandline instead of via a CI/CD system. Scripts
included for both Linux and Windows.  Some are
also specific to different test runnders.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_targets">12.3. Targets</h3>
<div class="paragraph">
<p>Test targets included in SDK.</p>
</div>
<div class="sect3">
<h4 id="_flask_rest_target">12.3.1. Flask Rest Target</h4>
<div class="paragraph">
<p>The flask rest target is a working example of a REST API backed by a SQLite database.
The example target contains one or more SQL injection vulnerabilities that can be
identified by fuzzing the API. This example is coded in Python using the Flask framework.</p>
</div>
<div class="sect4">
<h5 id="_important_files">Important Files</h5>
<div class="paragraph">
<p><em>Target Rest Service</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">rest_target.html</dt>
<dd>
<p>Very simple UI for Selenium demo</p>
</dd>
<dt class="hdlist1">rest_target.py</dt>
<dd>
<p>Start target API service using <em>http</em>.  <code>python rest_target.py</code></p>
</dd>
<dt class="hdlist1">rest_ssl_target.py</dt>
<dd>
<p>Start target API service using <em>https</em> with yourserver.crt and yourserver.key.
   <code>python rest_ssl_target.py</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Example TLS Certificates and Keys</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">yourserver.crt</dt>
<dd>
<p>Example TLS certificate used by rest_ssl_target.py</p>
</dd>
<dt class="hdlist1">yourserver.key</dt>
<dd>
<p>Example TLS private key used by rest_ssl_target.pyh</p>
</dd>
<dt class="hdlist1">rootCA.pem</dt>
<dd>
<p>Example TLS CA certificate that can be used by Peach</p>
</dd>
<dt class="hdlist1">rootCA.key</dt>
<dd>
<p>Example TLS CA Private key that can be used by peach</p>
</dd>
<dt class="hdlist1">clientcert.crt</dt>
<dd>
<p>Example TLS Client Certificate that can be used to demo
client cert authentication.</p>
</dd>
<dt class="hdlist1">clientcert.key</dt>
<dd>
<p>Example TLS Client Private Key that can be used to demo
client cert authentication.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_usage_4">Usage</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run test target</p>
</li>
<li>
<p>Select a traffic generator. Each testrunner includes an example that works with the flask target.</p>
</li>
<li>
<p>Kick off a test run using included SDK scripts (run_test*) as example.</p>
</li>
<li>
<p>View results in Peach API Security web interface</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_logging_fault_detection">Logging &amp; Fault Detection</h5>
<div class="paragraph">
<p>The Rest Target logs to the console and also syslog to host 127.0.0.1.
The provided Peach API Security automatically listens for Syslog messages to monitor.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_licensing_2">13. Licensing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peach API Security is licensed in two ways depending on how it&#8217;s purchased.
When purchased directly through Peach Fuzzer, LLC, Peach API Security is
licensed per instance.
When purchased through a cloud provider marketplace, billing occurs through
the marketplace itself for each instance that is started.</p>
</div>
<div class="paragraph">
<p>This chapter is intended for purchases made directly through Peach Fuzzer, LLC
as cloud marketplace purchases are automatically licensed.</p>
</div>
<div class="paragraph">
<p>For instances purchased through Peach Fuzzer, LLC, each instance must be activated through our licensing system.
When the instance is destroyed, it&#8217;s license must be returned before it can be used again.</p>
</div>
<div class="sect2">
<h3 id="_license_types">13.1. License Types</h3>
<div class="paragraph">
<p>Peach API Security has two purchase options that enable different features of the product.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Peach API Security Basic</dt>
<dd>
<p>The Basic version of Peach API Security contains all features with the exception
of the fuzz testing modules.  This covers OWASP Top 10 and PCI 6.5, but does not
perform additional fuzz testing.</p>
<div class="paragraph">
<p>The checks/asserts not included with this licenses will be shown as disabled
in the project/profile configuration.</p>
</div>
</dd>
<dt class="hdlist1">Peach API Security Advanced</dt>
<dd>
<p>The Advanced version of Peach API Security expands the Basic feature set
by adding including fuzz testing modules.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_licensing_concepts">13.2. Licensing Concepts</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Activation ID</dt>
<dd>
<p>Activation IDs are used to license Peach API Security instances.
Each purchased instance will receive it&#8217;s own activation ID.
Activation IDs can be found via the <a href="https://dl.peachfuzzer.com">Peach API Security Portal</a>
on the licensing page.</p>
</dd>
<dt class="hdlist1">Device ID</dt>
<dd>
<p>Each {poroduct} instance has a unique device id.
When an instance is activated, an activation id is associated
with a device id.
An instance&#8217;s device id can be found in the Licensing section of
the Settings page.</p>
<div class="paragraph">
<p>To reclaim an activation id the device must be returned using the
portal.
See the reclaim license section for additional information.</p>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_how_to_identify_unused_activation_ids">13.2.1. How to identify unused activation IDs</h4>
<div class="paragraph">
<p>To identify unused activation ids follow these steps.</p>
</div>
<div class="sect4">
<h5 id="_step_1_access_portal">Step 1: Access Portal</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>From the top navigation select the "Licensing" button</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_identify_unused_activation_ids">Step 2: Identify Unused Activation IDs</h5>
<div class="paragraph">
<p>Compare list of device ids/activation ids to list of all activation ids.
The delta between these lists are the unused activation ids.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_find_instance_device_id">13.2.2. How to find instance device ID</h4>
<div class="paragraph">
<p>Each {oroduct} instance has a unique device id.
When an instance is activated an activation id is associated
with a device id.
An instance&#8217;s device id can be found in the Licensing section of
the Settings page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/License_DeviceId.png" alt="License DeviceId">
</div>
<div class="title">Figure 27. Device ID</div>
</div>
<div class="paragraph">
<p>To reclaim an activation id the device must be returned using the
portal.
See the reclaim license section for instructions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_activation">13.3. Activation</h3>
<div class="paragraph">
<p>Prior to use each Peach API Security instance must be activated.
Two activation methods are provided:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Online Activation</dt>
<dd>
<p>This method requires the instance have internet access.</p>
</dd>
<dt class="hdlist1">Offline Activation</dt>
<dd>
<p>This method can be used when no internet access is available.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_online_activation_2">13.3.1. Online Activation</h4>
<div class="paragraph">
<p>Online activation is the quickest way to activate your licensed Peach API Security instance.
Online activation requires internet connectivity.
If your instance does not have internet connectivity please follow the offline
activation process.</p>
</div>
<div class="sect4">
<h5 id="_step_1_activation_id_from_portal_3">Step 1: Activation ID from Portal</h5>
<div class="paragraph">
<p>Access the Peach API Security portal/download site and copy an unused activation id.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>The download page will display a list of activation ids</p>
</li>
<li>
<p>Copy an unused activation id</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_ActivationId.png" alt="Portal ActivationId">
</div>
<div class="title">Figure 28. Portal Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_peach_api_security_licensing_page_3">Step 2: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 29. Not Activated Alert</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_enter_activation_id_3">Step 3: Enter Activation ID</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll to Licensing section of settings page</p>
</li>
<li>
<p>Paste copied activation ID into activation ID box</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_ActivationId.png" alt="Activate Licensing ActivationId">
</div>
<div class="title">Figure 30. Enter Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_4_online_activation_2">Step 4: Online Activation</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the "Online Activation" button</p>
</li>
<li>
<p>Wait for action to complete</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_OnlineActivation.png" alt="Activate Licesning OnlineActivation">
</div>
<div class="title">Figure 31. Click Online Activation</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_activated_3">Step 5: Activated</h5>
<div class="paragraph">
<p>The alert will turn green if the activation of successful, as shown below.
An error will be displayed if the activation failed.</p>
</div>
<div class="paragraph">
<p>Common reasons for activation failure include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No internet connectivity</p>
</li>
<li>
<p>Activation ID already used</p>
</li>
<li>
<p>Activation ID entered incorrectly</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_Activated.png" alt="Activate Licensing Activated">
</div>
<div class="title">Figure 32. Activated</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_offline_activation_2">13.3.2. Offline Activation</h4>
<div class="paragraph">
<p>Offline activation does not require that your Peach API Security instance have internet access.
The person performing activation will need access to both the Peach API Security instance and also access to the internet.
This access is not required to be at the same time.</p>
</div>
<div class="sect4">
<h5 id="_step_1_activation_id_from_portal_4">Step 1: Activation ID from Portal</h5>
<div class="paragraph">
<p>Access the Peach API Security portal/download site and copy an unused activation id.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>The download page will display a list of activation ids</p>
</li>
<li>
<p>Copy an unused activation id</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_ActivationId.png" alt="Portal ActivationId">
</div>
<div class="title">Figure 33. Portal Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_peach_api_security_licensing_page_4">Step 2: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 34. Not Activated Alert</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_enter_activation_id_4">Step 3: Enter Activation ID</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll to Licensing section of settings page</p>
</li>
<li>
<p>Paste the copied activation ID into activation ID box</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_ActivationId.png" alt="Activate Licensing ActivationId">
</div>
<div class="title">Figure 35. Enter Activation ID</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_4_download_offline_request_2">Step 4: Download Offline Request</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Offline Activation Request "Download" button</p>
</li>
<li>
<p>Wait for file to download</p>
</li>
<li>
<p>Move file to machine with internet connectivity for next step</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_Offline_DownloadRequest.png" alt="Activate Licesning Offline DownloadRequest">
</div>
<div class="title">Figure 36. Click Download</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_upload_to_portal_2">Step 5: Upload to Portal</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>Click on the Licensing link on top nav</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_LicensingPage.png" alt="Portal LicensingPage">
</div>
<div class="title">Figure 37. Licensing Page</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on Offline Activation Upload button</p>
</li>
<li>
<p>Select the file downloaded from Peach API Security in Step 4.</p>
</li>
<li>
<p>Once processed a response file will automatically download.</p>
</li>
<li>
<p>Copy response download to machine with access to Peach API Security instance.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Portal_LicensingPage_OfflineUpload.png" alt="Portal LicensingPage OfflineUpload">
</div>
<div class="title">Figure 38. Offline Activation Upload</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_6_peach_api_security_licensing_page_2">Step 6: Peach API Security Licensing Page</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security as normal, <a href="https://INSTANCE_IP" class="bare">https://INSTANCE_IP</a></p>
</li>
<li>
<p>A yellow alert banner should show indicating the instance has not yet been activated.</p>
</li>
<li>
<p>Click on the "licensing" link in the yellow alert.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_NotActivatedAlert.png" alt="Activate NotActivatedAlert">
</div>
<div class="title">Figure 39. Not Activated Alert</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on Offline Activation Upload button</p>
</li>
<li>
<p>Upload response file downloaded in Step 5</p>
</li>
<li>
<p>Wait for file to be processed.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licesning_Offline_UploadResponse.png" alt="Activate Licesning Offline UploadResponse">
</div>
<div class="title">Figure 40. Offline Activation Upload</div>
</div>
</div>
<div class="sect4">
<h5 id="_step_5_activated_4">Step 5: Activated</h5>
<div class="paragraph">
<p>If activation was successfull the alert will turn green as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Activate_Licensing_Activated.png" alt="Activate Licensing Activated">
</div>
<div class="title">Figure 41. Activated</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reclaim_license_returning_device">13.4. Reclaim license/Returning Device</h3>
<div class="paragraph">
<p>An activation id/license cannot be reused unless the existing activated device
is returned, freeing up the license for re-use.
Perform the following steps to return a device.</p>
</div>
<div class="sect3">
<h4 id="_step_1_identify_device_id_to_return">13.4.1. Step 1: Identify Device ID to Return</h4>
<div class="paragraph">
<p>The easiest method to determine the correct device id assumes the activated
instance is still running and available.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access Peach API Security in the normal manner</p>
</li>
<li>
<p>Navigate to the Settings page using the top navigation links</p>
</li>
<li>
<p>Scroll down to the Licesning section</p>
</li>
<li>
<p>The device id is listed.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/License_DeviceId.png" alt="License DeviceId">
</div>
<div class="title">Figure 42. Device ID</div>
</div>
<div class="paragraph">
<p>If the instance is no longer available, the device ID must be identified
from the list of registered devices.  This could include checking the device
id&#8217;s of all available instances to determine which device id is not in active
use.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_2_access_portal">13.4.2. Step 2: Access Portal</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login to portal via <a href="https://dl.peachfuzzer.com">https://dl.peachfuzzer.com</a>.</p>
</li>
<li>
<p>From the top navigation select the "Flexera Portal" button</p>
</li>
<li>
<p>Flexera licensing portal will load</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Return_Device_ClickFlexera.png" alt="Return Device ClickFlexera">
</div>
<div class="title">Figure 43. Flexera Portal Navigation</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_3_search_devices">13.4.3. Step 3: Search Devices</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the Search Devices link</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Return_Device_ClickSearchDevices.png" alt="Return Device ClickSearchDevices">
</div>
<div class="title">Figure 44. Search Devices</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_4_return_device">13.4.4. Step 4: Return Device</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select "Action &#8594; Return Device"</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="/Users/flaub/src/deja/peach-pro/master/docs/src.web/images/Licensing/Return_Device_ClickReturnDevice.png" alt="Return Device ClickReturnDevice">
</div>
<div class="title">Figure 45. Return Device</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_5_verify_device_removed">13.4.5. Step 5: Verify Device Removed</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the Licensing page on the portal</p>
</li>
<li>
<p>Verify the device id is no longer listed</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_step_6_destroy_instance">13.4.6. Step 6: Destroy Instance</h4>
<div class="paragraph">
<p>If the instance who&#8217;s license was just returned is still active, it should
be terminated/removed to avoid breaking the licensing terms.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_licensing_expiring_warning">13.5. Licensing Expiring Warning</h3>
<div class="paragraph">
<p>Peach API Security will display a warning alert in the UI when the instance
license is near expiration.  This is intended to provide time to
acquire a new license and re-activate the instance.  If you&#8217;re seeing the
license expiration warning, please contact Peach API Security sales to assist in
renewing your license.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_purchase_additional_licenses">13.6. How to purchase additional licenses</h3>
<div class="paragraph">
<p>Additional licenses can be purchased through the Peach API Security sales team via <a href="mailto:sales@peachfuzzer.com">sales@peachfuzzer.com</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.3.0.0<br>
Last updated 2017-03-06 12:53:12 PST
</div>
</div>
</body>
</html>