[[Test]]
== Test

// Reviewed:
//  - 01/30/2014: Seth & Mike: Outlined
// * Include/exclude
// * Mutator include/exclude
//  * Mention you can only have one (include specific set or exclude a specific set, not both)
// * Use of Publishers (including multiple publishers)
// * Agents including platform tag (may just link off to that?)
// * Logging
// * Mutation strategy
//  * With parameters (probably this should just be done in the strategy docs)
// * All attributes for Test
// * Link to configuration files
// * State model reference
// * Use of multiple tests in a pit file

// Reviewed 04/07/2014: Lynn
// Major edits 

The Test element defines the tests that Peach will run during this fuzzing session. Peach requires at least one Test element for fuzzing to occur.

Test configures a specific fuzzing occurrence that combines a StateModel with a Publisher and other configuration options (such as including/excluding elements from being mutated, Agents, and fuzzing strategies).

One pit can contain multiple Test elements; simply provide the test element names on the Peach command line. 

NOTE: When running Peach, the Test element named "Default" will be run if a test name is not provided on the command line.

=== Syntax

[source,xml]
----
<Test name="Default">

  <!-- Optionally exclude some elements from mutation -->
  <Exclude xpath="//Reserved" />
  <Exclude xpath="//Magic" />

  <!-- Optional agent references -->
  <Agent ref="LocalWindowsAgent" platform="windows" />
  <Agent ref="LocalOsxAgent" platform="osx" />
  <Agent ref="LocalLinuxAgent" platform="linux" />
  
  <Agent ref="RemoteAgent" />

  <!-- Indicate which state model to use (required) -->
  <StateModel ref="TheState" />

  <!-- Configure the publisher to use (required) -->
  <Publisher class="Tcp">
     <Param name="Host" value="127.0.0.1" />
     <Param name="Port" value="9001" />
  </Publisher>

  <!-- Use a different fuzzing strategy -->
  <Strategy class="Random" />
  
  <!-- Log output to disk -->
  <Logger class="File">
    <Param name="Path" value="logs" />
  </Logger>
</Test>
----

=== Attributes

_Required:_

xref:name[name]:: Name of the test, use "Default" for default test 

_Optional:_

waitTime:: Time to wait in between each test case (Defaults to zero (0))
faultWaitTime:: Time to wait for a fault to occur before starting next iteration. (Defaults to 0)
controlIteration:: How often should we perform control iterations.  (Defaults to 0)
replayEnabled:: Should iterations be replayed when a fault occurs. Defaults to true.

=== Child Elements

_Required:_

 * xref:StateModel[StateModel]
 * xref:Publisher[Publisher]

_Optional:_

 * xref:AgentsMonitors[Agent]
 * xref:Test_Include[Include]
 * xref:Test_Exclude[Exclude]
 * xref:MutationStrategies[Strategy]
 * xref:Logger[Logger]
