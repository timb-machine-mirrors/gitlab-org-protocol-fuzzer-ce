<<<
[[Monitors_ButtonClicker]]
== ButtonClicker Monitor

The _ButtonClicker_ monitor provides mouse click events for popup windows during fuzzing. _ButtonClicker_ identifies whether a window receives button clicks by trying to match a specified string to the message body in the window. The intent of this monitor is to keep a fuzzing session active, regardless of whether popup windows display during fuzzing. 

This monitor runs in the Windows environment. 

For example, if an application crashes and needs to restart or has troublle starting, it might display a popup window asking to start with a specific set of featues that could aid in troubleshooting the cause of failure. A sample popup window consistent with this situation follows:

.{nbsp}
image::{images}/PopupWindowExample.png[]

Here, the _ButtonClicker_ monitor provides a mouse click event in response to the popup window. The response allows fuzzing to continue instead of waiting for a user to respond to the question raised by the popup window.

NOTE: This monitor is especially useful for applications that re-use a pop-up window for many purposes. The window has one 
title, but the main area of the window can display several different messages depending on the context in the application. 
Another monitor to consider for watching popup windows is xref:Monitors_PopupWatcher[PopupWatcher], that monitors popup windows based on the window title rather than matching a string in the message body.

=== Parameters

_Required:_

WindowText:: Text to find in the popup window. Peach performs a string search to determine whether matching text occurs in the popup window.
ButtonName:: Label displayed to the user that is on or near the button that will receive the click.

_Optional:_

None.

=== Examples

ifdef::peachug[]

.Basic Usage Example +

This parameter example is from a setup that uses the ButtonClicker monitor. The monitor will respond to the pop-up window that displays when restarting the application after a crash.

The ButtonClicker monitor uses the following parameter settings to click the "No" button in the pop-up window :

[cols="2,4" options="header",halign="center"] 
|==========================================================
|Parameter    |Value
|WindowText   |Do you want to start in safe mode?
|ButtonName   |No
|==========================================================


endif::peachug[]


ifndef::peachug[]

.Basic Usage Example +

This example uses the ButtonClicker monitor to respond to a question from a pop-up window that displays when restarting an application after a crash.

=======================
[source,xml]
----
<?xml version="1.0" encoding="utf-8"?>
<Peach xmlns="http://peachfuzzer.com/2012/Peach" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://peachfuzzer.com/2012/Peach peach.xsd">

  <DataModel name="TheDataModel">
    <Number size="32" signed="false" value="31337" />
  </DataModel>

  <StateModel name="State" initialState="Initial" >
    <State name="Initial">
      <Action type="output">
          <DataModel ref="TheDataModel"/>
      </Action>
    </State>
  </StateModel>

  <Agent name="Local">
    <Monitor class="ButtonClicker">
      <Param name="WindowText" value="Do you want to start in safe mode?" />
      <Param name="ButtonName" value="No" />
    </Monitor>
  </Agent>

  <Test name="Default">
    <StateModel ref="State"/>

    <Agent ref="Local" />

    <Publisher class="ConsoleHex"/>

    <Logger class="File">
      <Param name="Path" value="logs"/>
    </Logger>
  </Test>
</Peach>
----

=======================

endif::peachug[]