<<<
:images: ../images

///////
// Advanced Configuration UI
// 
// Part A - Variables -- This document
// Part B - Monitoring -- Next document
//
///////

[[Program_PeachWebAdvanceConfig]]
=== Configuration Menu

As an alternative to using the Quick Start wizard, you can configure a Pit by using the Configuration menu. This menu consists of three parts: variables, monitoring, and test. In contrast to the Quick Start wizard that leads sequentially through the entire configuration, you can shuffle the order in which you configure variables or set up monitors. 

The Variable and Monitoring parts need to be completed to pass a test of the configuration; this is true whether you use the Configuration Menu or the Quick Start wizard.

To begin from the Home Page, 

1. Click the Library menu entry.
2. From the Pit Library, select a Pit or an existing configuration.

* Selecting a configuration means that you revising the settings of an existing configuration. Peach displays the start screen for the configuration.
* Selecting a Pit means that you are creating a new configuration. You will need to 
name the configuration, optionally provide a description, and click "Submit" to reach the start screen for the configuration.
+
image::{images}/NP2_Config_Start.png[]

3. Click the "Configure Variables" button to define or edit the variables and their values.

[NOTE]
=========
*Switching Pit Configurations*

The active Peach Pit configuration can be changed in the {peachweb} by clicking on the Home menu icon above the menu along the left side of the screen. Then, click on the Library menu item to choose a Pit or Pit configuration in your library. 
=========

==== Variables

The variables data entry screen lists the information needed by the selected pit, as in the following illustration. Some of the information applies to the Peach environment; two examples are the Peach Installation Directory and the Pit Library Path. Other information is pit specific, such as file names used to fuzz file formats and port addresses used to fuzz network protocols.

image::{images}/AC01_Variables_Init.png[]

The Peach environment variables includes the following entries:

* Peach Installation Directory 
+
The Peach Installation Directory is the directory that contains the peach executable file. This directory was created when Peach was installed on the computer system.

* Peach Working Directory 
+
The Peach working directory is the current working directory for fuzzing. While this directory is usually the directory containing Peach, the directory can be another location on your system. The Peach Working Directory is set by launching Peach from the shell command line. The value is the current working directory of the command shell when you start Peach.

* Root Log Directory 
+
The default name of this directory is Logs. The default location is a subdirectory of the Peach Installation Directory. You can specify another location for it, such as a subdirectory of the Peach Working Directory. 

TIP: Each pit has its own logs that appear as subdirectories of the logger Path.

* Pit Library Path 
+
The Pit library path is is the full path of the folder in the Peach installation directory that contains your licensed Peach Pits and Pit Packs. The folder name is "pits", and contains subdirectories that hold your licensed Pits, Pit configurations, and Peach-supplied sample files. 

For descriptions on the pit-specific variables, see the documentation for the individual pit.

==== Pit-specific Variables

In the previous illustration, the last three variables are specific to the JPG-JFIF Pit. Because the variables have default values, you can use the supplied values during the fuzzing job. 

* If a variable is labeled optional or has a default value, you need not supply a value to enable the configuration to run.

* If a variable lacks a default value and is not marked optional, you need to supply a value for the variable before you can fuzz the target.

When entering a data value, type the value into the appropriate text box of the form. 
If you'd like to use the value of another variable, type `\\##`, the name of the 
variable that contains the value you want to use, and `##` to end the variable name.

The default value of the "Sample Path" variable in the previous illustration uses another variable ("PitLibraryPath") as part of its value. 

TIP: The values for some variables, such as "Seed File", allow wild card characters, allowing you to glob several items in the specification. With the globbed "Seed File" in the fuzzing jbo, Peach will evenly distribute the use of each file that matches the file specification 
in the fuzzing job.

===== Custom Variables 

You can create your own set variables for Peach. Perhaps you want to identify 
where the image repository is located. Or, perhaps you want to identify the 
MAC addresses, interface names, and IP addresses for the network interfaces on 
your system. 

Whatever the resource you'd like to specify, once you've created a variable and 
given it a value, you can use the variable wherever appropriate when supplying 
values for Pit variables and monitor variables. 

Additionally, once defined, the custom variable is added to the dropdown variable list. The list of variables displays during data entry when a `#` is typed as the sole character in a data field, as shown in the following illustration.

image::{images}/AC02_Variable_DropList.png["Peach Variable List", scalewidth="70%"]

.Creating a custom variable

Here are the steps to add a custom variable to Peach:

. Begin on the Variables page.
+
image::{images}/AC03_Vars_AddVar.png["Variables_page2", scalewidth="70%"]

. Click the "Add Variable" button immediately above and to the right of list of variables. 
+
The "Add Variable" pop-up dialog displays. 
+
image::{images}/AC04_AddVar_Popup.png["New Variable Definition", scalewidth="70%"]

. Fill in values for the name, key, and value fields. The following illustration shows a variable locating a JPEG repository.
+
** The *Name* parameter is the name of the custom variable, and allows spaces and
punctuation. This is the name to search on if you want to edit the value of the variable.
+
** The *Key* parameter is the value, such as `JPEGs`, that you plug into values in the Peach Web UI. When Peach processes the pit, the fuzzer replaces the key parameter with the value of the *Value* parameter. 
+
** The *Value* parameter stores the value that Peach uses when processing the pit.
+
image::{images}/AC05_AddVar_FilledIn.png["Variable Definition Entered", scalewidth="70%"]

. Click OK.

. Click save. +
The new value is now part of the list, and has been saved for future use. 
+
image::{images}/AC06_Vars_Page_Saved.png["Variable Page Saved", scalewidth="70%"]


.Using a custom variable

Using a custom variable consists of typing `\\##`, the variable name, and `##` in the value of another variable. In the following illustration, the "Sample Path" variable refers to the "JPEG Sample Pictures". When parsing the configuration information, Peach inserts the value `C:\Samples\JPEG` for the value of the "Sample Path". 

image::{images}/AC07_Vars_Page_Using.png["Using a New Variable", scalewidth="70%"]
