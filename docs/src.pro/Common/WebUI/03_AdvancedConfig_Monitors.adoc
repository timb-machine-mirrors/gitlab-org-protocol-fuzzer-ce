==== Monitoring
The Monitoring data entry screen defines one or more Agents and one or more Monitors for the Pit.

Agents are host processes for monitors and publishers. Local agents can reside on the same machine as Peach, and can control the test environment through monitors and publishers. Remote agents reside on the test target, and can provide remote monitors and publishers.

Monitors are components that perform one or more of the following functions: detect faults (issues), collect data associated with faults, and help manage the fuzzing job to reduce the level of human interaction througout the job.

===== From the Home Page

To begin configuring from the Home Page,

1. Click the Library menu entry.
2. From the Pit Library, select a Pit or an existing configuration.

* Selecting a configuration means that you revising the settings of an existing configuration. Peach displays the start screen for the configuration.
* Selecting a Pit means that you are creating a new configuration. You will need to
name the configuration, optionally provide a description, and click "Submit" to reach the start screen for the configuration.
+
image::{images}/Common/WebUI/NP2_Config_Start.png[]

3. Click the "Configure Monitoring" button to define or edit agents, monitors, and the data values associated with them. The Monitoring data entry screen displays and is initially empty.
+
image::{images}/Common/WebUI/AC08_Monitors_Page_Empty.png["Initial Monitor/Agent definitions", scalewidth="70%"]

The workflow for this data entry screen has you declare an Agent. Then, you can branch out and do the following in any order:

* Declare one or more monitors for the agent
* Fill in details for a monitor
* Switch focus from one monitor to another
* Declare additional agents, as needed
* Switch focus from one agent to another

In this instance, we're going to complete the agent, then add a monitor and fill in the monitor settings.

===== Specifying an Agent

Here are the steps to add an agent to a configuration:

1. Click the "Add Agent" button. Peach adds a new agent to the Monitors page, as in the following illustration.
+
image::{images}/Common/WebUI/AC09_Mon_Pg_NewAgent.png["New Agent", scalewidth="70%"]
+
An agent has a name and location. The location can be local or remote.

** Local agents are in-line processes that are part of the Peach platform.
** Remote agents are separate applications that reside on the same hardware as the test target. Remote agents act as intermediaries with Peach and the test targets, passing test cases to the test target and sending test case results and data to Peach.
+
If you use a remote agent, you need to supply location information that consists of the following parts<Channel>://IPv4:port

... Channel Specify one of the following for the channel type: 'tcp', 'sdfs', or 'asdfka'.
... //Ipv4   Specify an IP v4 address for the id.
... port     Specify the port number the agent is using. If the port is well known, use the default value.
... Example: agent using a well-know tcp channel:  tcp://192.168.127.128:9001

2. Give the agent a name, such as `LocalAgent` and click "Save".
+
Peach saves the Agent information, provides a visual cue with a "Saved successfully." message in a banner near the top of the page.

===== Adding a Monitor

1. click the "Add a monitor..." button. +
Peach displays a list of monitors that you can use in your configuration. The monitors are categorized by usage. Fault detection monitors appear first, then data collection, automation, android, and lastly, other monitors.
+
image::{images}/Common/WebUI/AC10_Mon_Pg_Monitor_DropList.png["Monitor Drop List", scalewidth="70%"]

2. Scroll to the windowsDebugger entry, select it, and click the entry to add it to the local agent.
+
image::{images}/Common/WebUI/AC11_Mon_Pg_Added_WinDbg.png[]

3. Fill in the details of monitor. +
Configuration information for each monitor is available in the xref:Monitors[Monitors] reference section. A list of monitors appears at the start of the section that links to the individual entries.
+
The monitor parameters divide into three groups: "Core", "When To Trigger", and "Advanced".
+
image::{images}/Common/WebUI/AC12_Mon_Windbg_Detail.png[]

** The "Core" parameters consist of parameters that you should check when creating or editing a configuration. This monitor provides a choice of what to monitor: an executable file, a running process, or a service.
+
image::{images}/Common/WebUI/AC12A_Mon_WinDbg_Core.png[]
** The "When To Trigger" address timing-related issues, such as restarting the test target at the end of an iteration. This is common for file fuzzing, where Peach creates a fuzzed data file, then starts the target with the fuzzed file as input.
+
image::{images}/Common/WebUI/AC12B_Mon_WinDbg_Trigger.png[]
** The "Advanced" parameters are items that seldom need to be specified; the default values of these parameters are usually sufficient as is. Yet, once in a while you might need to access one of these parameters. When fuzzing a network client, the "No Cpu Kill" parameter needs to be set to true to give the client an opportunity to close cleanly.
+
image::{images}/Common/WebUI/AC12C_Mon_WinDbg_Advanced.png[]


===== Sample Agent with Multiple Monitors
The following illustration is of an agent with multiple monitors. Note that you can show or hide the details for a monitor by clicking the arrow to the left of the monitor name. In fact, this is true for agents, too.

image::{images}/Common/WebUI/AC13_LocAgnt_n_Mtrs.png[]

===== Sample Remote Agent
The following illustration is of a remote agent. The location of the agent is the IP address of the remote machine, and that the address is stored in a custom variable. The agent manages multiple monitors.

image::{images}/Common/WebUI/AC14_RemAgnt_n_Mtrs.png[]

==== Test

In the Test section, Peach performs a test on the selected Pit configuration using settings provided for variables, agents, and monitors. Peach identifies the readiness of the Pit configuration for testing by tracking and reporting the progress of completing settings for the variables, agents, and monitors.

image::{images}/Common/WebUI/QS31_Test.png[]

NOTE: The Test section runs a single test case without any fuzzing. +
The test requires that the target device, service, or application be available for use.

TIP: This screen issues a warning if the pit is not configured, but lets the user run the test.

* Click the Begin Test button to run the test. +
When the test completes, Peach reports whether the Pit configuration passes the test. If the configuration passes the test, the following message displays:
+
image::{images}/Common/WebUI/QS32_TestPass.png[]

You can start a fuzzing job with your pit.

NOTE: For more information on the test report and for addressing configuration issues, see the xref:Test_PitConfiguration[Test Pit Configuration] section.
