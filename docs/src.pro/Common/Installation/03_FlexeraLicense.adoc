[[License_FuzzFlex]]
=== Peach FuzzFlex

Peach FuzzFlex is a flexible licensing model which allows users to purchase test cases in batches of 100k.
Each test case that Peach executes is considered one 'use' of the Peach license against the total number of test cases purchased.

During the delivery, Peach will create a user profile that can be used to access the Peach Fuzzer download site.
The user can also be used to access the Licensing Operations Portal, used to check usage statistics, via the download site.
The download site is available at link:https://dl.peachfuzzer.com[https://dl.peachfuzzer.com].

Peach FuzzFlex can be deployed in one of two ways:

xref:License_FuzzFlex_CLS[Cloud License Server (Online Synchronization)]::
    This scenario is sufficient for most customers.
    A persistent connection to the Internet is required for this option.
    It is much easier to use this deployment option since a Cloud License Server
    will be automatically provisioned and managed for you.

xref:License_FuzzFlex_LLS[Local License Server (Offline Synchronization)]::
Users who wish to use Peach FuzzFlex without having access to the Internet can deploy a
Local License Server onsite to provide offline activation and synchronization of licensing
information.
+
Deploying a local license server requires changes to your account.
Please contact licensing@peachfuzzer.com for more information about the process.

[[License_FuzzFlex_CLS]]
==== Cloud License Server

A Cloud License Server provides functionality for serving and monitoring a counted pool of licenses
for Peach FuzzFlex.
A persistent connection to the Internet is required so that usage data can be uploaded to
the Cloud License Server while a Peach FuzzFlex job is running.

===== Downloading Peach FuzzFlex

. When your Peach Fuzzer welcome email arrives, click the link to reset your initial password.
. Navigate to https://dl.peachfuzzer.com with your preferred web browser.
. At the login prompt under the FuzzFlex Sign In section,
enter the new username/password that was recently reset and click +Sign In+.
+
image::{images}/Common/Installation/Portal_Home_Flex.png[]

. On the +Downloads+ page, select the Peach release version and operating system to install.
.. Choose a release version from the items on the left side.
.. Click the download icon on the right side after deciding which OS and architecture is needed.
+
image::{images}/Common/Installation/Portal_Downloads.png[]

. If your organization has multiple entitlements,
you may need to select an Activation ID that matches your purchase.
Contact licensing@peachfuzzer.com for more information if you are unsure which Activation ID to select.
This selection will be skipped if there is only one entitlement for your organization.
. After a few moments, an End User License Agreement acceptance page appears.
Click +I ACCEPT+ to continue.
+
image::{images}/Common/Installation/Portal_EULA_Flex.png[]

. The download will begin.
Depending on your network connection,
this could take a few minutes.

[[License_FuzzFlex_LLS]]
==== Local License Server (Offline Synchronization)

The Local License Server provides functionality for serving and monitoring a counted pool of licenses
for Peach FuzzFlex.
Users who wish to use Peach FuzzFlex without having access to the Internet can deploy a
Local License Server onsite to provide offline activation and synchronization of licensing
information.

Deploying a local license server requires changes to your account.
Please contact licensing@peachfuzzer.com for more information about the process.

===== Hardware Requirements

The following are the minimum hardware requirements for license server:

|====
| Disk | 100 MB
| RAM  | 4 GB
| CPU  | 1 GHz
|====

===== Supported Platforms

The Local License Server is supported on the following platforms.

[options="header"]
|========
| Operating System    | CPU Architecture  | Version
.4+^.^| Linux   .4+^.^| x86/x86-64        | CentOS 6.0
                                          | CentOS 7.0
                                          | Red Hat Enterprise Linux 6.0
                                          | Red Hat Enterprise Linux 7.0
.2+^.^| Windows .2+^.^| x86/x86-64        | Windows 8 (including 8.1) and 10
                                          | Windows Server 2012 R2
|========

===== Java Prerequisites

The following are the Java prerequisites for the machine on which the Local License Server is installed:

* Oracle JRE 1.8 or OpenJDK 1.8
* A 64-bit JRE for a 64-bit license server or a 32-bit JRE for a 32-bit license server
(not adhering to this requirement can cause the license server to fail to start)
* The JAVA_HOME (or JRE_HOME) environment variable on your system set to the path for your default JDK (or JRE) installation

NOTE: The license server requires only the JRE component.
If JRE is your default Java installation,
set the JRE_HOME environment variable;
if JDK is your default installation,
set JAVA_HOME.

===== Preparing a Local License Server for Windows

. When your Peach Fuzzer welcome email arrives, click the link to reset your initial password.
. Navigate to https://dl.peachfuzzer.com with your preferred web browser.
. At the login prompt under the FuzzFlex Sign In section,
enter the new username/password that was recently reset and click +Sign In+.
+
image::{images}/Common/Installation/Portal_Home_Flex.png[]

. On the +Downloads+ page, select the +flexnetls+ package that matches your system.
.. Choose the latest release version from the items on the left side.
.. Click the download icon on the right side of the +flexnetls-win_x86.zip+ or +flexnetls-win_x64.zip+ package.
+
image::{images}/Common/Installation/Portal_Flex_Downloads.png[]

. After a few moments, an End User License Agreement acceptance page appears.
Click +I ACCEPT+ to continue.
+
image::{images}/Common/Installation/Portal_EULA_Flex.png[]

. The download will begin.
Depending on your network connection,
this could take a few minutes.

. Extract the installation archive to +C:\flexnetls+.

. Run the following commands as an Administrator to install and start the server:
+
----
cd C:\flexnetls
flexnetls.bat -install
flexnetls.bat -start
----

. Once your local license server is installed and running,
follow the instructions provided on the 'Licensing' page on the
https://dl.peachfuzzer.com[Peach Downloader] site.
+
An Activation ID will be required to continue.
The 'Licensing' page should provide this information.
If you need help with finding the Activation ID,
please contact licensing@peachfuzzer.com.
+
As an example,
the 'Licensing' page will ask you to run a command similar to:
+
----
cd C:\flexnetls
flexnetlsadmin.bat -server http://127.0.0.1:7070/api/1.0/instances/~ -activate -id AID
----
+
NOTE: Substitute the +AID+ in the above command with the Activation ID found on the 'Licensing' page.

. After initially activating the Local License Server,
you'll need to return to the 'Licensing' page and use the +Link Features+ button
to ensure that all line items for an entitlement are linked to the Local License Server.

. Finally, after your features have been linked with the Local License Server,
perform another activation as before to ensure that your entitlement is synchronized
with the Flex Net Operations back-end.

NOTE: For more information and additional deployment options,
see the 'FlexNet Embedded 2016 R2 License Server Administration Guide' found
in the installation folder as a file named +FNE_LicenseServerAdminGuide_2016R2.pdf+.

===== Preparing a Local License Server for Linux

. When your Peach Fuzzer welcome email arrives, click the link to reset your initial password.
. Navigate to https://dl.peachfuzzer.com with your preferred web browser.
. At the login prompt under the FuzzFlex Sign In section,
enter the new username/password that was recently reset and click +Sign In+.
+
image::{images}/Common/Installation/Portal_Home_Flex.png[]

. On the +Downloads+ page, select the +flexnetls+ package that matches your system.
.. Choose the latest release version from the items on the left side.
.. Click the download icon on the right side of the +flexnetls-linux_x86.zip+ or +flexnetls-linux_x86_64.zip+ package.
+
image::{images}/Common/Installation/Portal_Flex_Downloads.png[]

. After a few moments, an End User License Agreement acceptance page appears.
Click +I ACCEPT+ to continue.
+
image::{images}/Common/Installation/Portal_EULA_Flex.png[]

. The download will begin.
Depending on your network connection,
this could take a few minutes.

. Extract the installation archive to +/opt/flexnetls+.

. Run the following commands as root to install and start the server:
+
----
cd /opt/flexnetls
sudo ./flexnetls.sh -install
sudo ./flexnetls.sh -start
----

. Once your local license server is installed and running,
follow the instructions provided on the 'Licensing' page on the
https://dl.peachfuzzer.com[Peach Downloader] site.
+
An Activation ID will be required to continue.
The 'Licensing' page should provide this information.
If you need help with finding the Activation ID,
please contact licensing@peachfuzzer.com.
+
As an example,
the 'Licensing' page will ask you to run a command similar to:
+
----
cd /opt/flexnetls
./flexnetlsadmin.sh -server http://127.0.0.1:7070/api/1.0/instances/~ -activate -id AID
----
+
NOTE: Substitute the +AID+ in the above command with the Activation ID found on the 'Licensing' page.

. After initially activating the Local License Server,
you'll need to return to the 'Licensing' page and use the +Link Features+ button
to ensure that all line items for an entitlement are linked to the Local License Server.

. Finally, after your features have been linked with the Local License Server,
perform another activation as before to ensure that your entitlement is synchronized
with the Flex Net Operations back-end.

NOTE: For more information and additional deployment options,
see the 'FlexNet Embedded 2016 R2 License Server Administration Guide' found
in the installation folder as a file named +FNE_LicenseServerAdminGuide_2016R2.pdf+.

===== Downloading Peach FuzzFlex

. Navigate to https://dl.peachfuzzer.com with your preferred web browser.
. At the login prompt under the FuzzFlex Sign In section,
enter the new username/password that was recently reset and click +Sign In+.
+
image::{images}/Common/Installation/Portal_Home_Flex.png[]

. On the +Downloads+ page, select the Peach release version and operating system to install.
.. Choose a release version from the items on the left side.
.. Click the download icon on the right side after deciding which OS and architecture is needed.
+
image::{images}/Common/Installation/Portal_Flex_Downloads.png[]

. If your organization has multiple entitlements,
you may need to select an Activation ID that matches your purchase.
Contact licensing@peachfuzzer.com for more information if you are unsure which Activation ID to select.
This selection will be skipped if there is only one entitlement for your organization.
. After a few moments, an End User License Agreement acceptance page appears.
Click +I ACCEPT+ to continue.
+
image::{images}/Common/Installation/Portal_EULA_Flex.png[]

. The download will begin.
Depending on your network connection,
this could take a few minutes.

===== Using Peach FuzzFlex

Once your organization has a Local License Server installed and running
(this may require the assistance of an IT administrator)
the Peach license configuration must be updated.
You can use the same license configuration for any machine intended to run
Peach FuzzFlex across your entire organization.

Follow these steps to update your local configuration.
To update the local configuration you will need the Local License Server URL.
In general, the URL should be of the form: +http://HOST:PORT/request+.
An example of a Local License Server URL is +http://192.168.1.2:7070/request+.

NOTE: For more information on determining the Local License Server URL,
see the 'FlexNet Embedded 2016 R2 License Server Administration Guide' found
in the installation folder as a file named +FNE_LicenseServerAdminGuide_2016R2.pdf+.

1. Edit the file +Peach.license.config+ located in your Peach install folder.
2. Replace +LOCAL_LICENSE_SERVER_URL+ with the Local License Server URL.
3. Restart Peach.

Example of an updated file is:

----
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <add key="licenseUrl" value="http://192.168.1.2:7070/request" />
    <add key="activationId" value="0000-0000-0000-0000-0000-0000-0000-0000" />
  </appSettings>
</configuration>
----

NOTE: The +activationId+ setting in the +Peach.license.config+ file should already be
set for you by the download process.
You only need to focus on modifying the +licenseUrl+ setting.

==== Managing Peach Fuzzer Flex Licenses

From the https://dl.peachfuzzer.com[Peach Downloader] website,
a link to the Licensing Portal is available after logging in with your username/password.
The Licensing Portal provides the following features:

* View entitlements
+
image::{images}/Common/Installation/FNO_Home.png[]

* View a usage report
+
image::{images}/Common/Installation/FNO_Usage_Gauge.png[]

// end
