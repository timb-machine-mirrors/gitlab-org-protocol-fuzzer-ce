include::VLAN_DataSheet.adoc[]

Configuration
-------------

.Target Configuration
	A VLAN interface or VLAN enabled switch is required.
	A VLAN interface can be added on Linux using vconfig.
	In order to run all tests both a UDP and TCP listener are required. The networking tool socat can be used as the listener.

_Example of using adding a VLAN interface:_

----
sudo apt-get install vlan

#Add a new vlan interface with the tag of 1
sudo vconfig add eth0 1

#Config the vlan interface
sudo ifconfig eth0.1 192.168.1.1 netmask 255.255.255.0 broadcast 192.168.1.255 up

#Setting up socat listener for UDP

sudo socat STDIO udp-listen:12345

#Setting up socat listener for TCP

sudo socat STDIO tcp-listen:12345
----

.Required Pit Configuration Changes
	TargetIPv6:: IPv6 address of the target host machine
	SourceIPv6:: IPv6 address of the interface on the local machine
	TargetIPv4:: IPv4 address of the target host machine
	SourceIPv4:: IPv4 address of the interface on the local machine
	SourceMAC:: MAC address on local machine
	TargetMAC:: MAC address of target machine
	Tag:: VLAN identifier specifying the VLAN to which the frames belong
	Interface:: Name of local interface (used for monitoring)
	SourcePort:: UDPv6 and/or TCPv6 port number of the local machine
	TargetPort:: UDPv6 and/or TCPv6 port number of the target host machine

.Optional Pit Configuration Changes
	Strategy:: Fuzzing strategy Peach will use for testing
	LoggerPath:: Path to folder where logs will be stored

.Sample VLAN Configuration File
[source,xml]
----
<?xml version="1.0" encoding="utf-8"?>
<PitDefines>
  <All>
    <Define key="SourceMAC" value="000000000000" />
    <Define key="TargetMAC" value="000000000000"/>
    <Define key="Strategy"  value="Sequential"/>
    <Define key="TargetIPv4" value="127.0.0.1"/>
    <Define key="SourceIPv4" value="127.0.0.1"/>
    <Define key="TargetIPv6" value="::1"/>
    <Define key="SourceIPv6" value="::1"/>
    <Define key="Tag" value="1"/>
    <Define key="Path" value="."/>

    <Define key="SourcePort" value="12345"/>
    <Define key="TargetPort" value="12345"/>
  </All>

  <Linux platform="linux">
    <Define key="Interface" value="eth0"/>
  </Linux>

  <OSX platform="osx">
    <!-- This can't run on OS X because it uses the RawEther publisher. -->
  </OSX>

  <Windows platform="windows">
    <!-- This can't run on windows because it uses the RawEther publisher. -->
  </Windows>
</PitDefines>
----

.Configure Additional Monitors
Add monitors to agent as needed

Running
-------

.Single test debug run
----
peach -1 -debug VLAN.xml
----
.Full test run
----
peach VLAN.xml
----