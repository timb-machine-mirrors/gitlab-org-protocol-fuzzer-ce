include::DHCPv6_DataSheet.txt[]

Configuration
-------------

.Target Configuration
A target machine with DHCPv6 enabled.  The software tool bind6 can be targeted in a linux environment.
A firewall must not be blocking DHCPv6 messages.

_Windows Firewall Inbound Rules to enable on Target:_

----
Core Networking - Dynamic Host Configuration Protocol for IPv6(DHCPV6-In)
----

.Requried Pit Configuration Changes
TargetIPv6:: IP address of the target host machine
SourceIPv6:: IP address of the interface on the local machine
SourcePort:: UDPv6 port number of the local machine
TargetPort:: UDPv6 port number of the target host machine
SourceMAC:: MAC Address of the local machine
TargetInterface:: Network Interface to configure
MulticastDHCP:: Multicast Address (fuzzed in DataModel)
TargetIPv6Lease:: Target IPv6 Lease (fuzzed in DataModel)
MaxTries:: Maximum number of packets to listen for before going to next iteration
Interface:: Name of local interface (used for monitoring) (Must be set to ::1)


.Optional Pit Configuration Changes
Strategy:: Fuzzing strategy Peach will use for testing
LoggerPath:: Path to folder where logs will be stored

.Sample DHCPv6 Configuration File
[source,xml]
----
<?xml version="1.0" encoding="utf-8"?>
<PitDefines>
  <All>
    <Define key="LoggerPath" value="logs/dhcpV6/"/>
    <Define key="SourcePort" value="547"/>
    <Define key="MulticastDHCP" value="ff02::1:2"/>
    <Define key="TargetIPv6" value="fe80::5054:ff:fe02:c880"/>
    <!-- <Define key="TargetIPv6" value="fe80::c524:6fc8:899e:fd7d"/> -->
    <Define key="TargetIPv6Lease" value="fe80::908:7a38:6156:acce"/>
    <Define key="SourceIPv6" value="fe80::3e97:eff:fe47:524a%4"/>
    <Define key="MaxTries" value="20"/> <!-- Maximum number of packets to listen for before going to next iter -->
    <Define key="SourceMAC" value="000c291bf55d"/>
    <Define key="TargetPort" value="546"/>
    <Define key="TargetInterface" value="veth1"/>
    <Define key="Strategy"  value="Sequential"/>
    <Define key="Interface"  value="::1"/> <!-- This needs to be "::1" to bind to all interfaces. This is because ipv6 multicast oddness. -->
    <Define key="RemoteAgentIP"  value="127.0.0.1"/>
    <Define key="Path" value="."/>
  </All>
  <Linux platform="linux">
    <Define key="tsharkInterface" value="eth0"/>
    <Define key="tsharkBin" value="/usr/bin/tshark"/>
  </Linux>
  <OSX platform="osx">
    <Define key="tsharkInterface" value="em0"/>
    <Define key="tsharkBin" value="/usr/local/bin/tshark"/> <!-- fix depending on actual install location -->
  </OSX>
  <Windows platform="windows">
    <!-- This can't run on windows anyway because it uses the RawEther publisher. -->
    <!-- Platform independance is added as an example. -->
    <Define key="tsharkInterface" value="2"/>
    <Define key="tsharkBin" value="C:\Program Files\Wireshark\tshark.exe"/>
  </Windows>
</PitDefines>
----

.Configure Additional Monitors
Add monitors to agent as needed

Running
-------

.Single test debug run
----
peach -1 -debug DHCPv6.xml
----
.Full test run
----
peach DHCPv6.xml
----