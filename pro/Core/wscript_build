#!/usr/bin/env python

deps = [
	'System.Runtime.Remoting.dll',
	'System.Runtime.Serialization.dll',
	'System.dll',
	'System.Management.dll',
	'System.Xml.dll',
	'System.Core.dll',
	'System.Data.dll',
	'System.Data.DataSetExtensions.dll',
	'System.Drawing.dll',
	'System.Numerics.dll',
	'System.Web.dll',
	'System.Web.Services.dll',
	'System.Configuration.dll',

	'Portable.Licensing.dll',
	'SocketHttpListener.dll',

	'NLog.dll',
	'SharpPcap.dll',
	'PacketDotNet.dll',
	'Ionic.Zip.dll',

	'IronPython.dll',
	'IronRuby.dll',
	'IronRuby.Libraries.dll',
	'IronRuby.Libraries.Yaml.dll',

	'Microsoft.Dynamic.dll',
	'Microsoft.CSharp.dll',
	'Microsoft.Scripting.dll',
	'Microsoft.Scripting.Metadata.dll',
	
	'Renci.SshNet.dll',
	'Newtonsoft.Json.dll',
	'SuperSocket.Common.dll',
	'SuperSocket.SocketBase.dll',
	'SuperSocket.SocketEngine.dll',
	'SuperWebSocket.dll',

	'Peach.Core.dll',
	'Godel.Core.dll',

	'Nancy.dll',
	'Nancy.Metadata.Module.dll',
	'Nancy.Hosting.Self.dll',
	'Nancy.Serialization.JsonNet.dll',
#	'Nancy.Swagger.Annotations.dll',
#	'Nancy.Swagger.dll',
#	'Swagger.ObjectModel.dll',

	'Managed.Adb.dll',
	'BouncyCastle.Crypto.dll',
	'aardvark_net.dll',
	'LibUsbDotNet.dll',

	'websocket-sharp.dll',

	'EntityFramework.dll',
	'System.Data.SQLite.EF6.dll',
	'System.Data.SQLite.Linq.dll',
	'System.ComponentModel.DataAnnotations.dll',
]

if bld.env.TARGET == 'win':
	deps.extend([
		'System.Data.SQLite.dll',
	])
else:
	deps.extend([
		'Mono.Data.Sqlite.dll',
	])

if bld.env.TARGET in ['win']:
	embed = 'Vix.dll'
else:
	embed = ''

bld(
	features = 'cs',
	use = deps,
	source = bld.path.ant_glob('**/*.cs'),
	resource = bld.path.ant_glob('Resources/**/* WebServices/Views/**/*'),
	embed = embed,
	content = 'IronPython.StdLib',
	ide_content = 'WebServices/Models/Model.cd',
	name = 'Peach.Pro.dll',
	namespace = 'Peach.Pro.Core',
)
